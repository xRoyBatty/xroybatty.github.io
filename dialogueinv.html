<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Dialogues Interactive Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .grade-section {
            margin-bottom: 30px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
        }
        .grade-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        .dialogue-container {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        .dialogue-header {
            background-color: #f8f9fa;
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dialogue-header:hover {
            background-color: #e9ecef;
        }
        .dialogue-header.active {
            background-color: #3498db;
            color: white;
        }
        .dialogue-title {
            font-weight: bold;
        }
        .dialogue-controls {
            display: none;
        }
        .dialogue-controls.active {
            display: block;
        }
        .control-buttons {
            padding: 10px 15px;
            background-color: #f8f9fa;
            border-top: 1px solid #ddd;
        }
        .dialogue-content {
            display: none;
            padding: 15px;
        }
        .dialogue-content.active {
            display: block;
        }
        .dialogue-line {
            margin-bottom: 8px;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            border-left: 3px solid transparent;
        }
        .dialogue-line:hover {
            background-color: #f8f9fa;
        }
        .dialogue-line.speaker-a {
            border-left-color: #3498db;
        }
        .dialogue-line.speaker-b {
            border-left-color: #e74c3c;
        }
        .dialogue-line.playing {
            background-color: #fff3cd;
            border-left-color: #ffc107;
        }
        .speaker {
            font-weight: bold;
            margin-bottom: 3px;
        }
        .speaker-a .speaker {
            color: #3498db;
        }
        .speaker-b .speaker {
            color: #e74c3c;
        }
        button {
            padding: 8px 16px;
            margin: 0 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .play-btn {
            background-color: #27ae60;
            color: white;
        }
        .play-btn:hover {
            background-color: #229954;
        }
        .pause-btn {
            background-color: #f39c12;
            color: white;
        }
        .pause-btn:hover {
            background-color: #e67e22;
        }
        .stop-btn {
            background-color: #e74c3c;
            color: white;
        }
        .stop-btn:hover {
            background-color: #c0392b;
        }
        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        .global-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }
        .global-controls.active {
            display: block;
        }
        .status {
            margin-top: 10px;
            font-style: italic;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>English Dialogues Interactive Player</h1>
        
        <!-- Global Controls -->
        <div class="global-controls" id="global-controls">
            <div><strong>Global Controls</strong></div>
            <button class="pause-btn" id="global-pause">Pause All</button>
            <button class="stop-btn" id="global-stop">Stop All</button>
            <div class="status" id="global-status">Ready</div>
        </div>

        <!-- OCENA 2 -->
        <div class="grade-section">
            <div class="grade-title">OCENA 2 (6 questions)</div>
            
            <div class="dialogue-container" data-grade="2" data-dialogue="1">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 1</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'm busy on Saturday.">
                        <div class="speaker">Person B:</div>
                        <div>I'm busy on Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Do you want to hang out on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Do you want to hang out on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'm sorry, I can't come.">
                        <div class="speaker">Person B:</div>
                        <div>I'm sorry, I can't come.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Sorry, maybe next time.">
                        <div class="speaker">Person B:</div>
                        <div>Sorry, maybe next time.</div>
                    </div>
                </div>
            </div>
            
            <div class="dialogue-container" data-grade="2" data-dialogue="2">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 2</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Mum's taking us to the adventure park on Saturday. Can you come?">
                        <div class="speaker">Person A:</div>
                        <div>Mum's taking us to the adventure park on Saturday. Can you come?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds fun. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds fun. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OCENA 3 -->
        <div class="grade-section">
            <div class="grade-title">OCENA 3 (7-8 questions)</div>
            
            <div class="dialogue-container" data-grade="3" data-dialogue="1">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 1</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I think so. Why?">
                        <div class="speaker">Person B:</div>
                        <div>I think so. Why?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds fun. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds fun. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Do you want to hang out on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Do you want to hang out on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Great! See you then.">
                        <div class="speaker">Person A:</div>
                        <div>Great! See you then.</div>
                    </div>
                </div>
            </div>
            
            <div class="dialogue-container" data-grade="3" data-dialogue="2">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 2</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Mum's taking us to the adventure park on Saturday. Can you come?">
                        <div class="speaker">Person A:</div>
                        <div>Mum's taking us to the adventure park on Saturday. Can you come?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'd love to, but we're visiting our cousins this Saturday.">
                        <div class="speaker">Person B:</div>
                        <div>I'd love to, but we're visiting our cousins this Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="That's too bad.">
                        <div class="speaker">Person A:</div>
                        <div>That's too bad.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Sorry, maybe next time.">
                        <div class="speaker">Person B:</div>
                        <div>Sorry, maybe next time.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes! Sunday is good.">
                        <div class="speaker">Person B:</div>
                        <div>Yes! Sunday is good.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out then?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out then?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OCENA 4 -->
        <div class="grade-section">
            <div class="grade-title">OCENA 4 (9-10 questions)</div>
            
            <div class="dialogue-container" data-grade="4" data-dialogue="1">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 1</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'm busy on Saturday.">
                        <div class="speaker">Person B:</div>
                        <div>I'm busy on Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="I said Sunday, not Saturday.">
                        <div class="speaker">Person A:</div>
                        <div>I said Sunday, not Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Oh, sorry! Yes, I think so.">
                        <div class="speaker">Person B:</div>
                        <div>Oh, sorry! Yes, I think so.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds fun. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds fun. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Great! What time?">
                        <div class="speaker">Person A:</div>
                        <div>Great! What time?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="How about 2 PM?">
                        <div class="speaker">Person B:</div>
                        <div>How about 2 PM?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Perfect! Do you want to hang out on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Perfect! Do you want to hang out on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks.</div>
                    </div>
                </div>
            </div>
            
            <div class="dialogue-container" data-grade="4" data-dialogue="2">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 2</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Mum's taking us to the adventure park on Saturday. Can you come?">
                        <div class="speaker">Person A:</div>
                        <div>Mum's taking us to the adventure park on Saturday. Can you come?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'd love to, but we're visiting our cousins this Saturday.">
                        <div class="speaker">Person B:</div>
                        <div>I'd love to, but we're visiting our cousins this Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="What about Sunday then?">
                        <div class="speaker">Person A:</div>
                        <div>What about Sunday then?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Sunday? Let me think.">
                        <div class="speaker">Person B:</div>
                        <div>Sunday? Let me think.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes! Sunday is much better.">
                        <div class="speaker">Person B:</div>
                        <div>Yes! Sunday is much better.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out then?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out then?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Do you want to hang out on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Do you want to hang out on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OCENA 5 -->
        <div class="grade-section">
            <div class="grade-title">OCENA 5 (11-12 questions)</div>
            
            <div class="dialogue-container" data-grade="5" data-dialogue="1">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 1</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Hi! Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Hi! Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I think so. Why?">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I think so. Why?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds fun. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds fun. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Great! What time?">
                        <div class="speaker">Person A:</div>
                        <div>Great! What time?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="How about 2 PM?">
                        <div class="speaker">Person B:</div>
                        <div>How about 2 PM?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Perfect! Do you want to hang out on Sunday at the park?">
                        <div class="speaker">Person A:</div>
                        <div>Perfect! Do you want to hang out on Sunday at the park?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="We can have lunch there.">
                        <div class="speaker">Person A:</div>
                        <div>We can have lunch there.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="What should I bring?">
                        <div class="speaker">Person A:</div>
                        <div>What should I bring?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Nothing special. Maybe some drinks.">
                        <div class="speaker">Person B:</div>
                        <div>Nothing special. Maybe some drinks.</div>
                    </div>
                </div>
            </div>
            
            <div class="dialogue-container" data-grade="5" data-dialogue="2">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 2</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Mum's taking us to the adventure park on Saturday. Can you come?">
                        <div class="speaker">Person A:</div>
                        <div>Mum's taking us to the adventure park on Saturday. Can you come?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'd love to, but we're visiting our cousins this Saturday.">
                        <div class="speaker">Person B:</div>
                        <div>I'd love to, but we're visiting our cousins this Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="That's too bad. When are you free?">
                        <div class="speaker">Person A:</div>
                        <div>That's too bad. When are you free?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'm sorry, I can't come this weekend.">
                        <div class="speaker">Person B:</div>
                        <div>I'm sorry, I can't come this weekend.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Really? What about Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Really? What about Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Actually, yes! Sunday is good.">
                        <div class="speaker">Person B:</div>
                        <div>Actually, yes! Sunday is good.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Great! Would you like to hang out then?">
                        <div class="speaker">Person A:</div>
                        <div>Great! Would you like to hang out then?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="We can do something else instead.">
                        <div class="speaker">Person A:</div>
                        <div>We can do something else instead.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, that's fine.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, that's fine.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Do you want to hang out on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Do you want to hang out on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks.">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OCENA 6 -->
        <div class="grade-section">
            <div class="grade-title">OCENA 6 (13+ questions)</div>
            
            <div class="dialogue-container" data-grade="6" data-dialogue="1">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 1</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Hi! Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Hi! Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Let me think... Yes, I am. What do you want to do?">
                        <div class="speaker">Person B:</div>
                        <div>Let me think... Yes, I am. What do you want to do?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Would you like to hang out?">
                        <div class="speaker">Person A:</div>
                        <div>Would you like to hang out?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds fun. Thank you!">
                        <div class="speaker">Person B:</div>
                        <div>That sounds fun. Thank you!</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Great! What time?">
                        <div class="speaker">Person A:</div>
                        <div>Great! What time?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="How about 12 o'clock?">
                        <div class="speaker">Person B:</div>
                        <div>How about 12 o'clock?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Perfect! Do you want to hang out on Sunday at the park?">
                        <div class="speaker">Person A:</div>
                        <div>Perfect! Do you want to hang out on Sunday at the park?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks. What time?">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks. What time?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="12 o'clock is good. We can have lunch there.">
                        <div class="speaker">Person A:</div>
                        <div>12 o'clock is good. We can have lunch there.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you. What should I bring?">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you. What should I bring?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Nothing special. Maybe some drinks.">
                        <div class="speaker">Person A:</div>
                        <div>Nothing special. Maybe some drinks.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="OK! Should we meet at the main gate?">
                        <div class="speaker">Person B:</div>
                        <div>OK! Should we meet at the main gate?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Yes, that's perfect.">
                        <div class="speaker">Person A:</div>
                        <div>Yes, that's perfect.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Great! See you on Sunday then.">
                        <div class="speaker">Person B:</div>
                        <div>Great! See you on Sunday then.</div>
                    </div>
                </div>
            </div>
            
            <div class="dialogue-container" data-grade="6" data-dialogue="2">
                <div class="dialogue-header">
                    <span class="dialogue-title">Dialog 2</span>
                    <span>▶ Click to play</span>
                </div>
                <div class="dialogue-controls">
                    <div class="control-buttons">
                        <button class="play-btn">Play All</button>
                        <button class="pause-btn">Pause</button>
                        <button class="stop-btn">Stop</button>
                    </div>
                </div>
                <div class="dialogue-content">
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Mum's taking us to the adventure park on Saturday. Can you come?">
                        <div class="speaker">Person A:</div>
                        <div>Mum's taking us to the adventure park on Saturday. Can you come?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Oh, I'd love to, but we're visiting our cousins this Saturday.">
                        <div class="speaker">Person B:</div>
                        <div>Oh, I'd love to, but we're visiting our cousins this Saturday.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Really? That's too bad. I wanted to go with you.">
                        <div class="speaker">Person A:</div>
                        <div>Really? That's too bad. I wanted to go with you.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="I'm sorry, I can't come. When did you plan this?">
                        <div class="speaker">Person B:</div>
                        <div>I'm sorry, I can't come. When did you plan this?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Just yesterday. Are you free on Sunday?">
                        <div class="speaker">Person A:</div>
                        <div>Just yesterday. Are you free on Sunday?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Sunday? Let me check...">
                        <div class="speaker">Person B:</div>
                        <div>Sunday? Let me check...</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Take your time.">
                        <div class="speaker">Person A:</div>
                        <div>Take your time.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes! Sunday is much better.">
                        <div class="speaker">Person B:</div>
                        <div>Yes! Sunday is much better.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Great! Would you like to hang out then?">
                        <div class="speaker">Person A:</div>
                        <div>Great! Would you like to hang out then?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="That sounds great. Thank you for changing the plan.">
                        <div class="speaker">Person B:</div>
                        <div>That sounds great. Thank you for changing the plan.</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="We can do something else instead.">
                        <div class="speaker">Person A:</div>
                        <div>We can do something else instead.</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="What do you have in mind?">
                        <div class="speaker">Person B:</div>
                        <div>What do you have in mind?</div>
                    </div>
                    <div class="dialogue-line speaker-a" data-speaker="A" data-text="Do you want to hang out on Sunday at the shopping center?">
                        <div class="speaker">Person A:</div>
                        <div>Do you want to hang out on Sunday at the shopping center?</div>
                    </div>
                    <div class="dialogue-line speaker-b" data-speaker="B" data-text="Yes, I'd love to, thanks. What time?">
                        <div class="speaker">Person B:</div>
                        <div>Yes, I'd love to, thanks. What time?</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

   <script>
    document.addEventListener('DOMContentLoaded', () => {
        if (!('speechSynthesis' in window)) {
            alert("Niestety, Twoja przeglądarka nie wspiera syntezy mowy. Funkcje audio nie będą działać.");
            // Opcjonalnie: ukryj przyciski i elementy związane z audio
            document.querySelectorAll('button.play-btn, button.pause-btn, button.stop-btn, .global-controls').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.dialogue-header span:nth-child(2)').forEach(el => el.style.display = 'none'); // Ukryj "▶ Click to play"
            return; // Zatrzymaj wykonywanie reszty skryptu audio
        }

        const synth = window.speechSynthesis;
        let voices = [];
        let speakerA, speakerB;
        let currentDialogue = null; // Wskazuje na aktualnie aktywny (rozwinięty/odtwarzany) dialog
        let currentLineIndex = 0;
        let isPlaying = false; // Czy trwa odtwarzanie sekwencji linii w currentDialogue
        let isPaused = false;  // Czy synteza mowy jest globalnie wstrzymana (synth.paused())

        const globalControls = document.getElementById('global-controls');
        const globalPauseBtn = document.getElementById('global-pause');
        const globalStopBtn = document.getElementById('global-stop');
        const globalStatus = document.getElementById('global-status');

        function initVoices() {
            voices = synth.getVoices();
            // console.log('Available voices:', voices);
            
            const englishVoices = voices.filter(voice => voice.lang.includes('en'));
            
            let femaleVoice = voices.find(voice => 
                voice.name.toLowerCase().includes('eva') || 
                voice.name.toLowerCase().includes('female')) ||
                englishVoices.find(voice => voice.name.toLowerCase().includes('female')) ||
                englishVoices[0];
            
            let maleVoice = voices.find(voice => 
                voice.name.toLowerCase().includes('male') && 
                !voice.name.toLowerCase().includes('female')) ||
                englishVoices.find(voice => voice.name.toLowerCase().includes('male')) ||
                englishVoices[1];

            // Fallbacks, jeśli preferowane głosy nie zostały znalezione
            if (!femaleVoice && voices.length > 0) femaleVoice = voices[0];
            if (!maleVoice && voices.length > 0) maleVoice = (voices.length > 1 ? voices[1] : voices[0]);
            
            speakerA = maleVoice;
            speakerB = femaleVoice;
            
            if (!speakerA || !speakerB) {
                console.warn("Nie udało się znaleźć preferowanych głosów. Używane będą domyślne głosy systemowe.");
            }
            // console.log('Selected voices:', { A: speakerA?.name, B: speakerB?.name });
        }

        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = initVoices;
        } else {
            // Niektóre przeglądarki (np. starsze Safari) mogą potrzebować tego timeoutu
             setTimeout(initVoices, 250); // Zmniejszony timeout, ale onvoiceschanged jest lepsze
        }
        initVoices(); // Spróbuj zainicjować od razu, na wypadek gdyby głosy już były dostępne

        function clearAllPlayingStates() {
            document.querySelectorAll('.dialogue-line.playing').forEach(line => {
                line.classList.remove('playing');
            });
            document.querySelectorAll('.dialogue-header.active').forEach(header => {
                header.classList.remove('active');
            });
            document.querySelectorAll('.dialogue-content.active').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.dialogue-controls.active').forEach(controls => {
                controls.classList.remove('active');
                const pauseBtn = controls.querySelector('.pause-btn');
                if (pauseBtn) pauseBtn.textContent = 'Pause'; // Resetuj tekst przycisku
            });
        }

        function playSingleLine(lineElement) {
            const dialogueContainerOfLine = lineElement.closest('.dialogue-container');
            if (!dialogueContainerOfLine) return;

            synth.cancel();
            isPlaying = false; 
            isPaused = false;  

            // Dezaktywuj wszystkie inne dialogi
            document.querySelectorAll('.dialogue-container').forEach(dc => {
                if (dc !== dialogueContainerOfLine) {
                    dc.querySelector('.dialogue-header')?.classList.remove('active');
                    dc.querySelector('.dialogue-content')?.classList.remove('active');
                    dc.querySelector('.dialogue-controls')?.classList.remove('active');
                    dc.querySelectorAll('.dialogue-line.playing').forEach(l => l.classList.remove('playing'));
                    const localPauseBtn = dc.querySelector('.dialogue-controls .pause-btn');
                    if (localPauseBtn) localPauseBtn.textContent = 'Pause';
                }
            });

            // Aktywuj UI dialogu bieżącej linii
            dialogueContainerOfLine.querySelector('.dialogue-header')?.classList.add('active');
            dialogueContainerOfLine.querySelector('.dialogue-content')?.classList.add('active');
            dialogueContainerOfLine.querySelector('.dialogue-controls')?.classList.add('active');

            // Zaktualizuj styl odtwarzanej linii
            document.querySelectorAll('.dialogue-line.playing').forEach(l => l.classList.remove('playing'));
            lineElement.classList.add('playing');

            currentDialogue = dialogueContainerOfLine; 

            const text = lineElement.getAttribute('data-text');
            const speaker = lineElement.getAttribute('data-speaker');
            const voice = speaker === 'A' ? speakerA : speakerB;

            const utterance = new SpeechSynthesisUtterance(text);
            if (voice) utterance.voice = voice;
            utterance.rate = 0.9;

            globalControls.classList.add('active');
            globalPauseBtn.textContent = 'Pause All'; 
            globalStatus.textContent = `Odtwarzanie: ${speaker} - "${text.substring(0, 30)}..."`;

            utterance.onend = () => {
                lineElement.classList.remove('playing');
                if (currentDialogue === dialogueContainerOfLine && !isPlaying) {
                    globalStatus.textContent = `${dialogueContainerOfLine.querySelector('.dialogue-title').textContent} aktywny. Gotowy.`;
                }
                // Globalne kontrolki pozostają aktywne, bo currentDialogue jest ustawiony
            };

            utterance.onerror = (e) => {
                console.error('Błąd syntezy mowy:', e);
                lineElement.classList.remove('playing');
                globalStatus.textContent = 'Wystąpił błąd';
            };

            synth.speak(utterance);
        }

        function playDialogue(dialogueContainer) {
            synth.cancel();
            
            // Jeśli kliknięto ten sam dialog, który już grał i był spauzowany - wznow
            if (currentDialogue === dialogueContainer && isPlaying && isPaused) {
                resumeDialogue();
                return;
            }

            clearAllPlayingStates(); // Czyści stany poprzednich dialogów

            currentDialogue = dialogueContainer;
            currentLineIndex = 0;
            isPlaying = true;
            isPaused = false;

            const header = dialogueContainer.querySelector('.dialogue-header');
            const content = dialogueContainer.querySelector('.dialogue-content');
            const controls = dialogueContainer.querySelector('.dialogue-controls');
            const localPauseBtn = controls.querySelector('.pause-btn');

            if (header) header.classList.add('active');
            if (content) content.classList.add('active');
            if (controls) controls.classList.add('active');
            if (localPauseBtn) localPauseBtn.textContent = 'Pause';

            globalControls.classList.add('active');
            globalPauseBtn.textContent = 'Pause All';
            
            playNextLine();
        }

        function playNextLine() {
            if (!currentDialogue || !isPlaying || isPaused) return;

            const lines = currentDialogue.querySelectorAll('.dialogue-line');
            
            // Usuń podświetlenie z poprzedniej linii
            if (currentLineIndex > 0) {
                 lines[currentLineIndex - 1]?.classList.remove('playing');
            }
            
            if (currentLineIndex >= lines.length) {
                isPlaying = false;
                globalStatus.textContent = `Dialog zakończony: ${currentDialogue.querySelector('.dialogue-title').textContent}.`;
                // currentDialogue pozostaje ustawiony, dialog jest wciąż "aktywny/otwarty"
                return;
            }

            const lineElement = lines[currentLineIndex];
            const text = lineElement.getAttribute('data-text');
            const speaker = lineElement.getAttribute('data-speaker');
            const voice = speaker === 'A' ? speakerA : speakerB;

            lineElement.classList.add('playing');

            const utterance = new SpeechSynthesisUtterance(text);
            if (voice) utterance.voice = voice;
            utterance.rate = 0.9;

            globalStatus.textContent = `Odtwarzanie dialogu: ${speaker} (${currentLineIndex + 1}/${lines.length})`;

            utterance.onend = () => {
                lineElement.classList.remove('playing'); // Usuń 'playing' tylko z bieżącej linii po zakończeniu
                currentLineIndex++;
                setTimeout(() => { // Krótka przerwa między liniami
                    playNextLine();
                }, 500); // Zmniejszona pauza
            };

            utterance.onerror = (e) => {
                console.error('Błąd syntezy mowy:', e);
                lineElement.classList.remove('playing');
                currentLineIndex++;
                setTimeout(() => {
                    playNextLine();
                }, 500);
            };

            synth.speak(utterance);
        }

        function pauseDialogue() {
            if (synth.speaking && !synth.paused) {
                synth.pause();
                isPaused = true;
                globalStatus.textContent = 'Pauza';
                globalPauseBtn.textContent = 'Resume All';
                if (currentDialogue) {
                    const localPauseBtn = currentDialogue.querySelector('.dialogue-controls .pause-btn');
                    if (localPauseBtn) localPauseBtn.textContent = 'Resume';
                }
            }
        }

        function resumeDialogue() {
            if (synth.paused) {
                const wasPlayingSequence = isPlaying; // Zapamiętaj, czy odtwarzano sekwencję
                synth.resume();
                isPaused = false;
                
                globalPauseBtn.textContent = 'Pause All';
                if (currentDialogue) {
                    const localPauseBtn = currentDialogue.querySelector('.dialogue-controls .pause-btn');
                    if (localPauseBtn) localPauseBtn.textContent = 'Pause';

                    if (wasPlayingSequence) { // Jeśli była odtwarzana sekwencja
                         // playNextLine() samo obsłuży kontynuację, jeśli isPaused jest false,
                         // ale status może wymagać ręcznej aktualizacji natychmiast po wznowieniu
                         const lines = currentDialogue.querySelectorAll('.dialogue-line');
                         if (currentLineIndex < lines.length) {
                            const lineElement = lines[currentLineIndex];
                            const speaker = lineElement.getAttribute('data-speaker');
                            globalStatus.textContent = `Odtwarzanie dialogu: ${speaker} (${currentLineIndex + 1}/${lines.length})`;
                         }
                    } else { // Jeśli odtwarzano pojedynczą linię
                        const playingLine = currentDialogue.querySelector('.dialogue-line.playing');
                        if (playingLine) {
                            const speaker = playingLine.getAttribute('data-speaker');
                            const text = playingLine.getAttribute('data-text');
                            globalStatus.textContent = `Odtwarzanie: ${speaker} - "${text.substring(0, 30)}..."`;
                        } else {
                             globalStatus.textContent = `Wznowiono. ${currentDialogue.querySelector('.dialogue-title').textContent} aktywny.`;
                        }
                    }
                } else {
                    globalStatus.textContent = 'Wznowiono';
                }
                // Jeśli odtwarzano sekwencję, playNextLine samo się wywoła, jeśli trzeba, po zakończeniu bieżącej kwestii
                // Jeśli odtwarzano pojedynczą linię, ona po prostu będzie kontynuowana
            }
        }

        function stopDialogue() {
            synth.cancel();
            isPlaying = false;
            isPaused = false;

            if (currentDialogue) { // Resetuj lokalny przycisk pauzy, jeśli istniał aktywny dialog
                const localPauseBtn = currentDialogue.querySelector('.dialogue-controls .pause-btn');
                if (localPauseBtn) localPauseBtn.textContent = 'Pause';
            }
            
            currentDialogue = null; 
            clearAllPlayingStates(); // Czyści UI wszystkich dialogów
            
            globalControls.classList.remove('active');
            globalStatus.textContent = 'Zatrzymano';
            globalPauseBtn.textContent = 'Pause All';
        }

        // Event Listeners
        document.querySelectorAll('.dialogue-header').forEach(header => {
            header.addEventListener('click', () => {
                const dialogueContainer = header.closest('.dialogue-container');
                if (currentDialogue === dialogueContainer && isPlaying && !isPaused) {
                    // Jeśli kliknięto nagłówek aktywnie odtwarzanego dialogu, potraktuj to jak pauzę
                    pauseDialogue();
                } else if (currentDialogue === dialogueContainer && isPlaying && isPaused) {
                    // Jeśli kliknięto nagłówek spauzowanego dialogu, wznow
                    resumeDialogue();
                }
                else {
                    playDialogue(dialogueContainer);
                }
            });
        });

        document.querySelectorAll('.dialogue-line').forEach(line => {
            line.addEventListener('click', (e) => {
                // Zapobiegaj propagacji do nagłówka, jeśli linia jest wewnątrz contentu, który jest klikalny
                e.stopPropagation(); 
                playSingleLine(line);
            });
        });

        document.querySelectorAll('.dialogue-controls .play-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const dialogueContainer = btn.closest('.dialogue-container');
                playDialogue(dialogueContainer);
            });
        });

        document.querySelectorAll('.dialogue-controls .pause-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const dialogueContainer = btn.closest('.dialogue-container');
                if (currentDialogue === dialogueContainer && (isPlaying || synth.speaking)) {
                    if (synth.paused) {
                        resumeDialogue();
                    } else {
                        pauseDialogue();
                    }
                }
            });
        });

        document.querySelectorAll('.dialogue-controls .stop-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                // Sprawdź, czy ten dialog jest aktywny, zanim go zatrzymasz
                const dialogueContainer = btn.closest('.dialogue-container');
                if (currentDialogue === dialogueContainer) {
                    stopDialogue();
                } else {
                    // Jeśli inny dialog jest aktywny, zatrzymaj go, ale niekoniecznie otwieraj ten.
                    // Dla uproszczenia, stop zawsze działa globalnie.
                    stopDialogue();
                }
            });
        });

        globalPauseBtn.addEventListener('click', () => {
            if (synth.speaking || isPlaying) { // Działaj, jeśli coś się odtwarza lub jest w trybie sekwencji
                if (synth.paused) {
                    resumeDialogue();
                } else {
                    pauseDialogue();
                }
            }
        });

        globalStopBtn.addEventListener('click', () => {
            stopDialogue();
        });
    });
</script>
</body>
</html>
