<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Podstawy Programowania</title>
    <!-- Style CSS -->
    <style>
        /* Zmienne CSS */
        :root {
            --primary-color: #4a2aae;
            --secondary-color: #5E63BA;
            --accent-color: #7f47dd;
            --background-color: #f0f8ff;
            --correct-color: #28a745;
            --wrong-color: #dc3545;
            --neutral-color: #f8f9fa;
            --text-color: #333;
            --white: #fff;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Og贸lne style */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background-image: radial-gradient(circle, rgba(255, 255, 255, 0.8) 10%, transparent 10%);
            background-size: 30px 30px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            position: relative;
        }

        /* Header */
        .quiz-header {
            background: var(--primary-color);
            color: var(--white);
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .quiz-header h1 {
            margin-bottom: 10px;
            font-size: 28px;
        }

        .quiz-header p {
            font-size: 16px;
            opacity: 0.9;
        }

        /* Progress bar */
        .progress-container {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-bar {
            height: 10px;
            background-color: var(--accent-color);
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Question section */
        .question-container {
            padding: 30px;
            min-height: 400px;
        }

        .question {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--primary-color);
        }

        /* Options */
        .options {
            list-style: none;
        }

        .option {
            background-color: var(--neutral-color);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            position: relative;
        }

        .option:hover {
            background-color: rgba(94, 99, 186, 0.1);
            transform: translateX(5px);
        }

        .option.correct {
            background-color: rgba(40, 167, 69, 0.2);
            color: var(--correct-color);
        }

        .option.incorrect {
            background-color: rgba(220, 53, 69, 0.2);
            color: var(--wrong-color);
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .option-label {
            margin-right: 10px;
            background: var(--secondary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .option-text {
            flex: 1;
        }

        /* Hint system */
        .hint-container {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(79, 185, 227, 0.1);
            border-left: 4px solid #4FB9E3;
            display: none;
        }

        .hint-text {
            font-style: italic;
            color: #1a6985;
        }

        .show-hint {
            display: block;
        }

        /* Navigation */
        .quiz-nav {
            display: flex;
            justify-content: space-between;
            padding: 15px 30px;
            background-color: rgba(0, 0, 0, 0.02);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--accent-color);
        }

        .btn-secondary {
            background-color: #f8f9fa;
            color: var(--text-color);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .btn-secondary:hover {
            background-color: #e9ecef;
        }

        .btn-hint {
            background-color: transparent;
            color: var(--secondary-color);
            padding: 5px 10px;
            margin-right: auto;
        }

        .btn-hint:hover {
            background-color: rgba(94, 99, 186, 0.1);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Results */
        .results {
            text-align: center;
            padding: 30px;
            display: none;
        }

        .results h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 28px;
        }

        .score {
            font-size: 48px;
            color: var(--accent-color);
            margin: 20px 0;
            font-weight: bold;
        }

        .result-message {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .result-emoji {
            font-size: 60px;
            margin-bottom: 20px;
        }

        /* Feedback */
        .feedback {
            font-weight: bold;
            margin-top: 15px;
            text-align: center;
            display: none;
            padding: 10px;
            border-radius: 8px;
        }

        .feedback.correct {
            color: var(--correct-color);
            background-color: rgba(40, 167, 69, 0.1);
        }

        .feedback.incorrect {
            color: var(--wrong-color);
            background-color: rgba(220, 53, 69, 0.1);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s forwards;
        }

        /* Responsive Styles */
        @media screen and (max-width: 768px) {
            .container {
                max-width: 100%;
                border-radius: 0;
            }

            .question {
                font-size: 18px;
            }

            .option {
                padding: 12px;
            }
        }

        @media screen and (max-width: 480px) {
            .quiz-header h1 {
                font-size: 22px;
            }

            .quiz-nav {
                flex-direction: column;
                gap: 10px;
            }

            button {
                width: 100%;
            }

            .btn-hint {
                margin-bottom: 10px;
                order: -1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="quiz-header">
            <h1>Quiz: Podstawy Programowania</h1>
            <p>Sprawd藕 swoj wiedz z podstaw programowania wizualnego</p>
            <div class="progress-container">
                <div class="progress-bar" id="progress"></div>
            </div>
        </div>
        
        <div class="question-container">
            <p class="question" id="question">Pytanie pojawi si tutaj</p>
            <ul class="options" id="options">
                <!-- Opcje zostan dodane dynamicznie przez JavaScript -->
            </ul>
            <div class="feedback" id="feedback">Informacja zwrotna</div>
            <div class="hint-container" id="hint-container">
                <p class="hint-text" id="hint-text">Podpowied藕 pojawi si tutaj</p>
            </div>
        </div>
        
        <div class="results" id="results">
            <div class="result-emoji" id="result-emoji"></div>
            <h2>Tw贸j wynik</h2>
            <div class="score" id="score">0/0</div>
            <p class="result-message" id="result-message">Wiadomo z wynikiem</p>
            <button class="btn-primary" id="restart-btn">Rozpocznij jeszcze raz</button>
        </div>
        
        <div class="quiz-nav" id="quiz-nav">
            <button class="btn-hint" id="hint-btn">Poka偶 podpowied藕</button>
            <button class="btn-secondary" id="prev-btn" disabled>Poprzednie</button>
            <button class="btn-primary" id="next-btn" disabled>Nastpne</button>
        </div>
    </div>

    <!-- Script JS -->
    <script>
        // Lista pyta quizu
        const quizQuestions = [
            {
                question: "Kt贸ry blok su偶y do poruszania duszkiem w g贸r po naciniciu klawisza strzaki w g贸r?",
                options: [
                    "gdy klawisz [strzaka w g贸r] nacinity, zmie y o 10",
                    "gdy klawisz [strzaka w g贸r] nacinity, zmie x o 10",
                    "gdy klawisz [strzaka w g贸r] nacinity, przesu o 10 krok贸w",
                    "gdy klawisz [strzaka w g贸r] nacinity, obr贸 o 10 stopni"
                ],
                correctAnswer: 0,
                hint: "Zastan贸w si, kt贸ra o odpowiada za ruch w g贸r i w d贸."
            },
            {
                question: "Jak sprawi, aby duszek porusza si losowo po scenie?",
                options: [
                    "zawsze, obr贸 o 90 stopni, przesu o 10 krok贸w",
                    "zawsze, obr贸 o losow liczb od -15 do 15 stopni, przesu o 10 krok贸w",
                    "zawsze, ustaw x na losowa liczba od -240 do 240, ustaw y na losowa liczba od -180 do 180",
                    "zawsze, zmie x o 10, zmie y o 10"
                ],
                correctAnswer: 1,
                hint: "Pomyl, co nadaje ruchowi nieprzewidywalny charakter."
            },
            {
                question: "Co nale偶y zrobi, aby duszek zmieni sw贸j wygld?",
                options: [
                    "zmie kostium na [nazwa kostiumu]",
                    "zmie to na [nazwa ta]",
                    "ukryj duszka",
                    "ustaw efekt kolor na 50"
                ],
                correctAnswer: 0,
                hint: "Duszek mo偶e mie kilka r贸偶nych wersji wygldu."
            },
            {
                question: "Jak utworzy zmienn, kt贸ra bdzie przechowywa liczb punkt贸w w grze?",
                options: [
                    "utw贸rz zmienn \"punkty\" dla wszystkich duszk贸w",
                    "utw贸rz zmienn \"punkty\" tylko dla tego duszka",
                    "utw贸rz komunikat \"punkty\"",
                    "utw贸rz blok \"punkty\""
                ],
                correctAnswer: 0,
                hint: "Zmienne su偶 do przechowywania danych, kt贸re mog si zmienia podczas dziaania programu."
            },
            {
                question: "Kt贸ry blok wykrywa kolizj (dotknicie) midzy dwoma duszkami?",
                options: [
                    "je偶eli < dotyka [nazwa duszka] ? > to",
                    "je偶eli < dotyka koloru [kolor] ? > to",
                    "je偶eli < klawisz [spacja] nacinity ? > to",
                    "je偶eli < x > 0 ? > to"
                ],
                correctAnswer: 0,
                hint: "Musisz sprawdzi, czy jeden duszek fizycznie styka si z drugim."
            },
            {
                question: "Jak zwikszy warto zmiennej \"punkty\" o 1?",
                options: [
                    "ustaw [punkty] na 1",
                    "zmie [punkty] o 1",
                    "ustaw [punkty] na (punkty) + 1",
                    "poka偶 zmienn [punkty]"
                ],
                correctAnswer: 1,
                hint: "Chcesz doda 1 do aktualnej wartoci, a nie ustawia konkretn warto."
            },
            {
                question: "Jak spowodowa, aby duszek pojawi si w losowym miejscu na scenie?",
                options: [
                    "id藕 do x: (losowa liczba od -240 do 240) y: (losowa liczba od -180 do 180)",
                    "id藕 do x: 0 y: 0",
                    "id藕 do [losowe poo偶enie]",
                    "przesu o (losowa liczba od 1 do 10) krok贸w"
                ],
                correctAnswer: 0,
                hint: "Scena w Scratch ma okrelone wymiary i wsp贸rzdne."
            },
            {
                question: "Kt贸ry blok sprawdza, czy warto zmiennej jest mniejsza od 20?",
                options: [
                    "je偶eli < [zmienna] < 20 > to",
                    "je偶eli < [zmienna] = 20 > to",
                    "je偶eli < [zmienna] > 20 > to",
                    "je偶eli < [zmienna] <= 20 > to"
                ],
                correctAnswer: 0,
                hint: "Symbol \"<\" oznacza \"mniejsze ni偶\"."
            },
            {
                question: "Jak wysa komunikat do wszystkich duszk贸w?",
                options: [
                    "nadaj komunikat [nazwa]",
                    "odbierz komunikat [nazwa]",
                    "powiedz [nazwa]",
                    "zapytaj [nazwa] i czekaj"
                ],
                correctAnswer: 0,
                hint: "Komunikaty su偶 do koordynacji dziaa midzy duszkami."
            },
            {
                question: "Kt贸ry blok pozwala duszkowi zareagowa na otrzymany komunikat?",
                options: [
                    "gdy klawisz [spacja] nacinity",
                    "gdy otrzymam komunikat [nazwa]",
                    "gdy ten duszek kliknity",
                    "gdy zmieniono to na [nazwa ta]"
                ],
                correctAnswer: 1,
                hint: "Duszek \"sucha\" okrelonych wiadomoci i wykonuje akcje po ich otrzymaniu."
            },
            {
                question: "Jak sprawi, aby duszek znikn z ekranu?",
                options: [
                    "zmie efekt ducha na 100",
                    "ukryj",
                    "przesu o -100 krok贸w",
                    "zmie rozmiar na 0%"
                ],
                correctAnswer: 1,
                hint: "Istnieje specjalny blok, kt贸ry sprawia, 偶e duszek przestaje by widoczny."
            },
            {
                question: "Jak pokaza ukrytego wczeniej duszka?",
                options: [
                    "poka偶",
                    "zmie efekt ducha na 0",
                    "zmie rozmiar na 100%",
                    "przesu na wierzch"
                ],
                correctAnswer: 0,
                hint: "Jest to przeciwiestwo ukrywania."
            },
            {
                question: "Kt贸ry blok su偶y do zatrzymania wszystkich skrypt贸w duszka?",
                options: [
                    "zatrzymaj [wszystko]",
                    "zatrzymaj [inne skrypty duszka]",
                    "zatrzymaj [ten skrypt]",
                    "zatrzymaj [inne skrypty sceny]"
                ],
                correctAnswer: 0,
                hint: "Czasem potrzebujemy zakoczy dziaanie wszystkich proces贸w naraz."
            },
            {
                question: "Jak ustawi warto pocztkow zmiennej \"paliwo\" na 100?",
                options: [
                    "zmie [paliwo] o 100",
                    "ustaw [paliwo] na 100",
                    "powiedz [paliwo] przez 2 sekundy",
                    "czekaj [paliwo] sekund"
                ],
                correctAnswer: 1,
                hint: "Na pocztku gry czsto musimy zainicjowa zmienne okrelonymi wartociami."
            },
            {
                question: "Kt贸ry blok sprawdza, czy duszek dotyka krawdzi sceny?",
                options: [
                    "je偶eli < dotyka [krawd藕] ? > to",
                    "je偶eli < dotyka [mysz] ? > to",
                    "je偶eli < dotyka [inny duszek] ? > to",
                    "je偶eli < na brzegu, odbij > to"
                ],
                correctAnswer: 0,
                hint: "Duszek mo偶e wykrywa r贸偶ne elementy, w tym granice ekranu."
            },
            {
                question: "Jak zatrzyma dziaanie skryptu na 2 sekundy?",
                options: [
                    "ustaw [czas] na 2",
                    "czekaj 2 sekundy",
                    "zatrzymaj [skrypt] na 2 sekundy",
                    "powt贸rz 2 razy"
                ],
                correctAnswer: 1,
                hint: "Czasem potrzebujemy wprowadzi pauz w dziaaniu programu."
            },
            {
                question: "Kt贸ry blok wywietla wiadomo \"Koniec gry\" na ekranie?",
                options: [
                    "nadaj komunikat [Koniec gry]",
                    "ustaw [wiadomo] na [Koniec gry]",
                    "powiedz [Koniec gry] przez 2 sekundy",
                    "zapytaj [Koniec gry?] i czekaj"
                ],
                correctAnswer: 2,
                hint: "Chodzi o pokazanie tekstu wypowiadanego przez duszka."
            },
            {
                question: "Jak sprawdzi, czy zmienna \"paliwo\" jest r贸wna 0?",
                options: [
                    "je偶eli < [paliwo] = 0 > to",
                    "je偶eli < [paliwo] < 0 > to",
                    "je偶eli < [paliwo] > 0 > to",
                    "je偶eli < [paliwo] <= 0 > to"
                ],
                correctAnswer: 0,
                hint: "Chcesz dokadnie sprawdzi, czy warto wynosi zero, nie mniej ani wicej."
            },
            {
                question: "Kt贸ry blok powtarza okrelone dziaania w nieskoczono?",
                options: [
                    "powt贸rz 10 razy",
                    "powt贸rz a偶 < warunek >",
                    "zawsze",
                    "zawsze je偶eli < warunek > to"
                ],
                correctAnswer: 2,
                hint: "W grach czsto potrzebujemy ptli, kt贸ra dziaa bez przerwy."
            },
            {
                question: "Jak zmieni kostium duszka na nastpny?",
                options: [
                    "zmie kostium na [nastpny kostium]",
                    "ustaw kostium na [nazwa kostiumu]",
                    "zmie kostium na [poprzedni kostium]",
                    "poka偶 nastpny kostium"
                ],
                correctAnswer: 0,
                hint: "Mo偶esz przechodzi sekwencyjnie przez dostpne kostiumy duszka."
            },
            {
                question: "Kt贸ry blok su偶y do odbicia duszka od krawdzi sceny?",
                options: [
                    "je偶eli < dotyka [krawd藕] ? > to, odbij si",
                    "odbij si od brzegu",
                    "je偶eli < dotyka [krawd藕] ? > to, obr贸 o 180 stopni",
                    "zawsze, gdy na brzegu, odbij"
                ],
                correctAnswer: 1,
                hint: "Istnieje specjalny blok, kt贸ry automatycznie obsuguje odbicia."
            },
            {
                question: "Jak zmniejszy warto zmiennej \"paliwo\" o 1?",
                options: [
                    "ustaw [paliwo] na (paliwo) - 1",
                    "zmie [paliwo] o -1",
                    "ustaw [paliwo] na 1",
                    "zmie [paliwo] o 1"
                ],
                correctAnswer: 1,
                hint: "Chcesz odj 1 od aktualnej wartoci."
            },
            {
                question: "Kt贸ry blok sprawdza jednoczenie dwa warunki (np. czy paliwo < 20 ORAZ punkty > 10)?",
                options: [
                    "je偶eli < < [paliwo] < 20 > lub < [punkty] > 10 > > to",
                    "je偶eli < < [paliwo] < 20 > i < [punkty] > 10 > > to",
                    "je偶eli < [paliwo] < 20 > to, je偶eli < [punkty] > 10 > to",
                    "je偶eli < nie < [paliwo] < 20 > > to"
                ],
                correctAnswer: 1,
                hint: "Potrzebujesz operatora logicznego, kt贸ry wymaga spenienia obu warunk贸w jednoczenie."
            },
            {
                question: "Jak sprawi, aby duszek miga (pojawia si i znika naprzemiennie)?",
                options: [
                    "powt贸rz 10 razy { ukryj, czekaj 0.2 sekundy, poka偶, czekaj 0.2 sekundy }",
                    "zawsze { ukryj, poka偶 }",
                    "ukryj, czekaj 1 sekund, poka偶",
                    "zmie efekt ducha o 25, czekaj 0.1 sekundy"
                ],
                correctAnswer: 0,
                hint: "Miganie wymaga naprzemiennego pokazywania i ukrywania z kr贸tkimi przerwami."
            },
            {
                question: "Kt贸ry blok pozwala duszkowi porusza si w kierunku, w kt贸rym jest zwr贸cony?",
                options: [
                    "przesu o 10 krok贸w",
                    "zmie x o 10",
                    "zmie y o 10",
                    "id藕 do x: 0 y: 0"
                ],
                correctAnswer: 0,
                hint: "Duszek ma kierunek, w kt贸rym jest zwr贸cony, i mo偶e si porusza wzdu偶 tego kierunku."
            },
            {
                question: "Jak sprawdzi, czy wcinito klawisz spacji?",
                options: [
                    "je偶eli < klawisz [spacja] nacinity ? > to",
                    "gdy klawisz [spacja] nacinity",
                    "je偶eli < dotyka [klawisz spacji] ? > to",
                    "gdy otrzymam komunikat [spacja]"
                ],
                correctAnswer: 0,
                hint: "Musisz sprawdzi stan klawisza w danym momencie."
            },
            {
                question: "Kt贸ry blok pozwala na wykonanie r贸偶nych dziaa w zale偶noci od spenienia warunku?",
                options: [
                    "je偶eli < warunek > to, w przeciwnym razie",
                    "je偶eli < warunek > to",
                    "zawsze je偶eli < warunek > to",
                    "powt贸rz a偶 < warunek >"
                ],
                correctAnswer: 0,
                hint: "Czasami chcemy wykona jedne dziaania, gdy warunek jest speniony, a inne, gdy nie jest."
            },
            {
                question: "Jak obr贸ci duszka w kierunku innego duszka?",
                options: [
                    "obr贸 w kierunku [nazwa duszka]",
                    "ustaw kierunek na [nazwa duszka]",
                    "obr贸 o [nazwa duszka] stopni",
                    "id藕 do [nazwa duszka]"
                ],
                correctAnswer: 0,
                hint: "Duszek mo偶e by skierowany w stron innego obiektu."
            },
            {
                question: "Kt贸ry blok su偶y do wywietlania wartoci zmiennej na scenie?",
                options: [
                    "powiedz [zmienna]",
                    "poka偶 zmienn [nazwa zmiennej]",
                    "ustaw [zmienna] na [widoczna]",
                    "nadaj komunikat [zmienna]"
                ],
                correctAnswer: 1,
                hint: "Zmienne mog by widoczne lub niewidoczne na scenie."
            },
            {
                question: "Jak sprawi, aby duszek powiedzia \"Zatankowano!\" przez 2 sekundy?",
                options: [
                    "ustaw [wiadomo] na [Zatankowano!]",
                    "nadaj komunikat [Zatankowano!]",
                    "powiedz [Zatankowano!] przez 2 sekundy",
                    "zapytaj [Zatankowano?] i czekaj"
                ],
                correctAnswer: 2,
                hint: "Duszek mo偶e \"wypowiada\" tekst przez okrelony czas."
            }
        ];

        // Elementy DOM
        const questionEl = document.getElementById('question');
        const optionsEl = document.getElementById('options');
        const progressEl = document.getElementById('progress');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const hintBtn = document.getElementById('hint-btn');
        const hintContainerEl = document.getElementById('hint-container');
        const hintTextEl = document.getElementById('hint-text');
        const quizNavEl = document.getElementById('quiz-nav');
        const resultsEl = document.getElementById('results');
        const scoreEl = document.getElementById('score');
        const resultMessageEl = document.getElementById('result-message');
        const resultEmojiEl = document.getElementById('result-emoji');
        const restartBtn = document.getElementById('restart-btn');
        const feedbackEl = document.getElementById('feedback');

        // Zmienne stanu
        let currentQuestionIndex = 0;
        let score = 0;
        let answeredQuestions = [];
        let shuffledQuestions = [];
        let userAnswers = [];

        // Inicjalizacja quizu
        function initQuiz() {
            // Resetowanie stanu
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions = [];
            userAnswers = [];

            // Mieszanie pyta
            shuffledQuestions = [...quizQuestions];
            shuffleArray(shuffledQuestions);

            // Inicjalizacja odpowiedzi u偶ytkownika
            userAnswers = Array(shuffledQuestions.length).fill(null);

            // Ukrycie element贸w, kt贸re powinny by ukryte na pocztku
            resultsEl.style.display = 'none';
            document.querySelector('.question-container').style.display = 'block';
            quizNavEl.style.display = 'flex';

            // Wywietlenie pierwszego pytania
            showQuestion(currentQuestionIndex);

            // Dodanie obsugi zdarze
            nextBtn.addEventListener('click', nextQuestion);
            prevBtn.addEventListener('click', prevQuestion);
            hintBtn.addEventListener('click', toggleHint);
            restartBtn.addEventListener('click', initQuiz);
        }

        // Funkcja pokazujca pytanie
        function showQuestion(index) {
            const currentQuestion = shuffledQuestions[index];
            
            // Aktualizacja tekstu pytania
            questionEl.textContent = `${index + 1}. ${currentQuestion.question}`;
            
            // Czyszczenie listy opcji
            optionsEl.innerHTML = '';
            
            // Tworzenie kopii opcji dla mieszania
            let shuffledOptions = [...currentQuestion.options];
            let correctOptionIndex = currentQuestion.correctAnswer;
            let correctOption = shuffledOptions[correctOptionIndex];
            
            // Mieszanie opcji
            shuffleArray(shuffledOptions);
            
            // Znajdowanie nowego indeksu poprawnej odpowiedzi po mieszaniu
            correctOptionIndex = shuffledOptions.indexOf(correctOption);
            
            // Tworzenie element贸w opcji
            const labels = ['A', 'B', 'C', 'D'];
            shuffledOptions.forEach((option, i) => {
                const li = document.createElement('li');
                li.className = 'option';
                li.dataset.index = i;
                
                // Sprawdzenie, czy u偶ytkownik ju偶 odpowiedzia na to pytanie
                if (answeredQuestions.includes(index)) {
                    if (i === correctOptionIndex) {
                        li.classList.add('correct');
                    } else if (userAnswers[index] === i) {
                        li.classList.add('incorrect');
                    }
                    li.classList.add('disabled');
                } else {
                    li.addEventListener('click', () => selectOption(i, correctOptionIndex));
                }
                
                li.innerHTML = `
                    <span class="option-label">${labels[i]}</span>
                    <span class="option-text">${option}</span>
                `;
                
                optionsEl.appendChild(li);
            });
            
            // Aktualizacja podpowiedzi
            hintTextEl.textContent = currentQuestion.hint;
            hintContainerEl.classList.remove('show-hint');
            
            // Aktualizacja przycisk贸w nawigacji
            prevBtn.disabled = index === 0;
            nextBtn.disabled = !answeredQuestions.includes(index);
            
            // Aktualizacja paska postpu
            updateProgress();
            
            // Ukrycie feedbacku
            feedbackEl.style.display = 'none';
        }

        // Funkcja wyboru opcji
        function selectOption(selectedIndex, correctIndex) {
            // Zaznaczenie opcji w interfejsie
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                const optionIndex = parseInt(option.dataset.index);
                
                if (optionIndex === selectedIndex) {
                    if (selectedIndex === correctIndex) {
                        option.classList.add('correct');
                        feedbackEl.textContent = 'Poprawna odpowied藕!';
                        feedbackEl.className = 'feedback correct';
                        score++;
                    } else {
                        option.classList.add('incorrect');
                        options[correctIndex].classList.add('correct');
                        feedbackEl.textContent = 'Niepoprawna odpowied藕!';
                        feedbackEl.className = 'feedback incorrect';
                    }
                }
                
                option.classList.add('disabled');
            });
            
            // Wywietlenie feedbacku
            feedbackEl.style.display = 'block';
            
            // Zapisanie odpowiedzi u偶ytkownika
            userAnswers[currentQuestionIndex] = selectedIndex;
            answeredQuestions.push(currentQuestionIndex);
            
            // Wczenie przycisku Nastpne
            nextBtn.disabled = false;
            
            // Automatyczne przejcie do nastpnego pytania po kr贸tkiej pauzie
            setTimeout(() => {
                if (currentQuestionIndex < shuffledQuestions.length - 1) {
                    nextQuestion();
                } else {
                    // Jeli to ostatnie pytanie, pozw贸l u偶ytkownikowi zobaczy odpowied藕 przez chwil
                    setTimeout(() => {
                        showResults();
                    }, 1500);
                }
            }, 1500);
        }

        // Funkcja przejcia do nastpnego pytania
        function nextQuestion() {
            if (currentQuestionIndex < shuffledQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                showResults();
            }
        }

        // Funkcja przejcia do poprzedniego pytania
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }

        // Funkcja przeczania podpowiedzi
        function toggleHint() {
            hintContainerEl.classList.toggle('show-hint');
            if (hintContainerEl.classList.contains('show-hint')) {
                hintBtn.textContent = 'Ukryj podpowied藕';
            } else {
                hintBtn.textContent = 'Poka偶 podpowied藕';
            }
        }

        // Funkcja aktualizacji paska postpu
        function updateProgress() {
            const percent = (answeredQuestions.length / shuffledQuestions.length) * 100;
            progressEl.style.width = `${percent}%`;
        }

        // Funkcja wywietlajca wyniki
        function showResults() {
            document.querySelector('.question-container').style.display = 'none';
            quizNavEl.style.display = 'none';
            resultsEl.style.display = 'block';
            
            scoreEl.textContent = `${score} / ${shuffledQuestions.length}`;
            
            const percentage = (score / shuffledQuestions.length) * 100;
            let message = '';
            let emoji = '';
            
            if (percentage >= 90) {
                message = 'wietnie! Jeste mistrzem programowania!';
                emoji = '';
            } else if (percentage >= 75) {
                message = 'Bardzo dobry wynik! Masz solidne podstawy!';
                emoji = '';
            } else if (percentage >= 60) {
                message = 'Dobra robota! Warto jeszcze powiczy niekt贸re koncepcje.';
                emoji = '';
            } else if (percentage >= 40) {
                message = 'Nie jest 藕le, ale warto powt贸rzy materia.';
                emoji = '';
            } else {
                message = 'Wyglda na to, 偶e potrzebujesz wicej praktyki. Nie poddawaj si!';
                emoji = '';
            }
            
            resultMessageEl.textContent = message;
            resultEmojiEl.textContent = emoji;
        }

        // Funkcja mieszajca tablic
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Inicjalizacja quizu po zaadowaniu strony
        window.onload = initQuiz;
    </script>
</body>
</html>
