<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polish Presidential Election Vocabulary: Advanced Learning Tool</title>
    <style>
        :root {
            --primary-color: #dc143c;
            --secondary-color: #ffffff;
            --polish-red: #dc143c;
            --polish-white: #ffffff;
            --accent-gold: #ffd700;
            --dark-color: #2c3e50;
            --light-gray: #f8f9fa;
            --medium-gray: #6c757d;
            --success-color: #28a745;
            --error-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --border-radius: 12px;
            --shadow-light: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-medium: 0 4px 16px rgba(0,0,0,0.15);
            --shadow-heavy: 0 8px 32px rgba(0,0,0,0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-main);
            line-height: 1.6;
            color: var(--dark-color);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Enhancement */
        .header {
            background: linear-gradient(135deg, var(--polish-red) 0%, #a91c3d 100%);
            color: var(--secondary-color);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.05"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .polish-flag {
            height: 8px;
            display: flex;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px auto 0;
            width: 100px;
            box-shadow: var(--shadow-light);
        }
        
        .flag-white, .flag-red {
            flex: 1;
            height: 100%;
        }
        
        .flag-white {
            background: var(--polish-white);
        }
        
        .flag-red {
            background: var(--polish-red);
        }
        
        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: var(--secondary-color);
            padding: 8px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
        }
        
        .nav-tab {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: var(--medium-gray);
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 4px;
        }
        
        .nav-tab:hover {
            background: var(--light-gray);
            color: var(--dark-color);
        }
        
        .nav-tab.active {
            background: var(--polish-red);
            color: var(--secondary-color);
            box-shadow: var(--shadow-light);
        }
        
        /* Game Modes */
        .game-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .game-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Stats Panel */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--secondary-color);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--polish-red);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        /* Enhanced Matching Interface */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .terms-panel, .definitions-panel {
            background: var(--secondary-color);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
        }
        
        .panel-header {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--polish-red);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--polish-red);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .panel-header::after {
            content: "Click to select";
            font-size: 0.8rem;
            color: var(--medium-gray);
            font-weight: normal;
            font-style: italic;
        }
        
        .panel-icon {
            font-size: 1.5rem;
        }
        
        /* Clickable Terms */
        .term-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 70px;
            position: relative;
            user-select: none;
        }
        
        .term-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-medium);
            border-color: var(--polish-red);
        }
        
        .term-item.selected {
            background: linear-gradient(135deg, rgba(220, 20, 60, 0.1) 0%, rgba(220, 20, 60, 0.2) 100%);
            border-color: var(--polish-red);
            box-shadow: var(--shadow-medium);
        }
        
        .term-item.matched {
            background: linear-gradient(135deg, var(--success-color) 0%, #20c997 100%);
            color: white;
            border-color: var(--success-color);
        }
        
        .term-item.matched:hover {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            border-color: var(--error-color);
        }
        
        .term-content {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .term-number {
            background: var(--polish-red);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .term-text {
            flex: 1;
        }
        
        .term-english {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .term-polish {
            font-size: 0.85rem;
            color: var(--medium-gray);
            font-style: italic;
        }
        
        .audio-btn {
            padding: 8px;
            background: var(--info-color);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }
        
        .audio-btn:hover {
            background: #138496;
            transform: scale(1.1);
        }
        
        .match-indicator {
            width: 35px;
            height: 35px;
            border: 2px solid var(--polish-red);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--polish-red);
            margin-left: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .match-indicator:hover {
            background: var(--light-gray);
            transform: scale(1.05);
        }
        
        .match-indicator.filled {
            background: var(--polish-red);
            color: white;
        }
        
        /* Clickable Definitions */
        .definition-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 12px;
            min-height: 80px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        
        .definition-item:hover {
            border-color: var(--polish-red);
            background: rgba(220, 20, 60, 0.05);
            transform: translateX(-5px);
            box-shadow: var(--shadow-medium);
        }
        
        .definition-item.selected {
            border-color: var(--polish-red);
            background: linear-gradient(135deg, rgba(220, 20, 60, 0.1) 0%, rgba(220, 20, 60, 0.2) 100%);
            box-shadow: var(--shadow-medium);
        }
        
        .definition-item.matched {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%);
        }
        
        .definition-item.matched:hover {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.1) 0%, rgba(200, 35, 51, 0.1) 100%);
            border-color: var(--error-color);
        }
        
        .definition-letter {
            background: var(--dark-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .definition-text {
            flex: 1;
            line-height: 1.5;
        }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--polish-red) 0%, #a91c3d 100%);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--medium-gray) 0%, #5a6268 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success-color) 0%, #20c997 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }
        
        /* Results Panel */
        .results-panel {
            background: var(--secondary-color);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            margin: 30px 0;
            text-align: center;
            display: none;
        }
        
        .results-panel.show {
            display: block;
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--polish-red);
            margin-bottom: 15px;
        }
        
        .performance-meter {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .performance-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--error-color) 0%, var(--warning-color) 50%, var(--success-color) 100%);
            transition: width 1s ease;
            border-radius: 10px;
        }
        
        /* Flashcard Mode */
        .flashcard-container {
            max-width: 600px;
            margin: 0 auto;
            perspective: 1000px;
        }
        
        .flashcard {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            min-height: 300px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            cursor: pointer;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            border-radius: var(--border-radius);
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, var(--polish-red) 0%, #a91c3d 100%);
            color: white;
        }
        
        .flashcard-content {
            max-width: 100%;
        }
        
        .flashcard-term {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .flashcard-definition {
            font-size: 1.2rem;
            line-height: 1.6;
        }
        
        .flashcard-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        /* Multiple Choice Mode */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .question-card {
            background: var(--secondary-color);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            margin-bottom: 30px;
        }
        
        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 25px;
        }
        
        .options-list {
            list-style: none;
        }
        
        .option-item {
            background: var(--light-gray);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            padding: 15px 20px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option-item:hover {
            background: #e9ecef;
            border-color: var(--polish-red);
        }
        
        .option-item.selected {
            background: rgba(220, 20, 60, 0.1);
            border-color: var(--polish-red);
        }
        
        .option-item.correct {
            background: rgba(40, 167, 69, 0.2);
            border-color: var(--success-color);
        }
        
        .option-item.incorrect {
            background: rgba(220, 53, 69, 0.2);
            border-color: var(--error-color);
        }
        
        /* Progress Tracking */
        .progress-container {
            background: var(--secondary-color);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            margin-bottom: 30px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--polish-red) 0%, #a91c3d 100%);
            transition: width 0.5s ease;
        }
        
        .progress-text {
            text-align: center;
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .matching-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
            }
            
            .nav-tab {
                margin: 4px 2px;
                padding: 10px 16px;
            }
            
            .stats-panel {
                grid-template-columns: 1fr 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
        
        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .term-item:focus,
        .definition-item:focus,
        .btn:focus {
            outline: 3px solid var(--accent-gold);
            outline-offset: 2px;
        }
        
        /* High contrast mode */
        @media (prefers-contrast: high) {
            :root {
                --primary-color: #000000;
                --secondary-color: #ffffff;
                --dark-color: #000000;
                --light-gray: #ffffff;
                --medium-gray: #000000;
            }
        }
        
        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Polish Presidential Election Vocabulary</h1>
            <div class="subtitle">Master 15 Essential Terms for Understanding Presidential Elections</div>
            <div class="polish-flag">
                <div class="flag-white"></div>
                <div class="flag-red"></div>
            </div>
        </header>
        
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-value" id="totalTerms">15</div>
                <div class="stat-label">Total Terms</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="masteredTerms">0</div>
                <div class="stat-label">Mastered</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="accuracyRate">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="streakCount">0</div>
                <div class="stat-label">Current Streak</div>
            </div>
        </div>
        
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="switchMode('matching')">Matching</button>
            <button class="nav-tab" onclick="switchMode('flashcards')">Flashcards</button>
            <button class="nav-tab" onclick="switchMode('quiz')">Multiple Choice</button>
            <button class="nav-tab" onclick="switchMode('study')">Study Guide</button>
        </nav>
        
        <!-- Matching Mode -->
        <div class="game-section active" id="matching-mode">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="matchingProgress" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    <span id="matchedCount">0</span> of <span id="totalMatchCount">15</span> terms matched
                </div>
            </div>
            
            <div class="matching-container">
                <div class="terms-panel">
                    <div class="panel-header">
                        <span>Terms</span>
                        <span class="panel-icon">📝</span>
                    </div>
                    <div class="terms-list" id="termsList">
                        <!-- Terms will be generated by JavaScript -->
                    </div>
                </div>
                
                <div class="definitions-panel">
                    <div class="panel-header">
                        <span>Definitions</span>
                        <span class="panel-icon">📖</span>
                    </div>
                    <div class="definitions-list" id="definitionsList">
                        <!-- Definitions will be generated by JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn btn-primary" onclick="checkAnswers()">
                    Check Answers
                </button>
                <button class="btn btn-secondary" onclick="resetMatching()">
                    Reset
                </button>
                <button class="btn btn-success" onclick="showHint()">
                    Hint
                </button>
            </div>
            
            <div class="results-panel" id="resultsPanel">
                <div class="score-display" id="scoreDisplay">0/15</div>
                <div class="performance-meter">
                    <div class="performance-fill" id="performanceFill" style="width: 0%"></div>
                </div>
                <p id="feedbackText">Complete the matching exercise to see your results!</p>
            </div>
        </div>
        
        <!-- Flashcard Mode -->
        <div class="game-section" id="flashcards-mode">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="flashcardProgress" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    Card <span id="currentCard">1</span> of <span id="totalCards">20</span>
                </div>
            </div>
            
            <div class="flashcard-container">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="flashcard-front">
                        <div class="flashcard-content">
                            <div class="flashcard-term" id="flashcardTerm">Click to start</div>
                            <button class="audio-btn" onclick="playAudio('en', event)">🔊</button>
                        </div>
                    </div>
                    <div class="flashcard-back">
                        <div class="flashcard-content">
                            <div class="flashcard-definition" id="flashcardDefinition">Definition appears here</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flashcard-controls">
                <button class="btn btn-secondary" onclick="previousCard()">← Previous</button>
                <button class="btn btn-primary" onclick="flipCard()">Flip Card</button>
                <button class="btn btn-secondary" onclick="nextCard()">Next →</button>
            </div>
        </div>
        
        <!-- Quiz Mode -->
        <div class="game-section" id="quiz-mode">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    Question <span id="currentQuestion">1</span> of <span id="totalQuestions">15</span>
                </div>
            </div>
            
            <div class="quiz-container">
                <div class="question-card">
                    <div class="question-text" id="questionText">
                        Select the correct definition for: <strong id="questionTerm">Term</strong>
                    </div>
                    <ul class="options-list" id="optionsList">
                        <!-- Options will be generated by JavaScript -->
                    </ul>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="submitQuizAnswer()">Submit Answer</button>
                    <button class="btn btn-secondary" onclick="nextQuestion()">Next Question</button>
                </div>
            </div>
        </div>
        
        <!-- Study Guide Mode -->
        <div class="game-section" id="study-mode">
            <div class="quiz-container">
                <div class="question-card">
                    <h2 style="color: var(--polish-red); margin-bottom: 20px;">Complete Study Guide</h2>
                    <div id="studyContent">
                        <!-- Study content will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Enhanced vocabulary data with authentic Polish presidential election terms
        const vocabularyData = [
            {
                id: 1,
                english: "Term of Office",
                polish: "Kadencja",
                definition: "The 5-year period during which the Polish president serves in office",
                pronunciation: "TURM uhv AW-fis"
            },
            {
                id: 2,
                english: "Polling Station",
                polish: "Lokal Wyborczy",
                definition: "The designated place where Polish voters go to cast their ballots during presidential elections",
                pronunciation: "POH-ling STAY-shuhn"
            },
            {
                id: 3,
                english: "Presidential Candidate",
                polish: "Kandydat na Prezydenta",
                definition: "A person running for the office of President of the Republic of Poland",
                pronunciation: "prez-i-DEN-shuhl KAN-di-dayt"
            },
            {
                id: 4,
                english: "Voter Turnout",
                polish: "Frekwencja Wyborcza",
                definition: "The percentage of eligible voters who participate in Polish presidential elections",
                pronunciation: "VOH-ter TURN-owt"
            },
            {
                id: 5,
                english: "Two-Round System",
                polish: "System Dwuturowy",
                definition: "Poland's electoral system where a second round is held if no candidate gets over 50% in the first round",
                pronunciation: "TOO-rownd SIS-tuhm"
            },
            {
                id: 6,
                english: "Voting Booth",
                polish: "Kabina do Głosowania",
                definition: "The private enclosed space where Polish voters mark their ballots in secret",
                pronunciation: "VOH-ting BOOTH"
            },
            {
                id: 7,
                english: "Ballot Box",
                polish: "Urna Wyborcza",
                definition: "The secure container where completed ballots are deposited during Polish elections",
                pronunciation: "BAL-uht BOKS"
            },
            {
                id: 8,
                english: "Cast a Vote",
                polish: "Oddać Głos",
                definition: "The act of submitting your completed ballot in Polish elections",
                pronunciation: "KAST uh VOHT"
            },
            {
                id: 9,
                english: "Ballot Paper",
                polish: "Karta do Głosowania",
                definition: "The official document listing presidential candidates in Polish elections",
                pronunciation: "BAL-uht PAY-per"
            },
            {
                id: 10,
                english: "Commander-in-Chief",
                polish: "Naczelny Dowódca",
                definition: "Constitutional role of the Polish President as head of the Polish Armed Forces",
                pronunciation: "kuh-MAN-der in CHEEF"
            },
            {
                id: 11,
                english: "Election Silence",
                polish: "Cisza Wyborcza",
                definition: "24-hour period before Polish elections when campaigning and publishing polls is prohibited",
                pronunciation: "i-LEK-shuhn SAY-luhns"
            },
            {
                id: 12,
                english: "Presidential Pardon",
                polish: "Ułaskawienie Prezydenckie",
                definition: "The Polish President's constitutional power to grant pardons, except for those convicted by the State Tribunal",
                pronunciation: "prez-i-DEN-shuhl PAR-duhn"
            },
            {
                id: 13,
                english: "Campaign Spot",
                polish: "Spot Wyborczy",
                definition: "Political advertisement broadcast during Polish presidential election campaigns",
                pronunciation: "kam-PAYN SPOT"
            },
            {
                id: 14,
                english: "Presidential Oath",
                polish: "Przysięga Prezydencka",
                definition: "Solemn oath taken by the Polish President before the National Assembly when assuming office",
                pronunciation: "prez-i-DEN-shuhl OHTH"
            },
            {
                id: 15,
                english: "Cabinet Council",
                polish: "Rada Gabinetowa",
                definition: "Special advisory body consisting of the Council of Ministers under the Polish President's chairmanship",
                pronunciation: "KAB-i-nuht KOWN-suhl"
            }
        ];
        
        // Game state variables
        let currentMode = 'matching';
        let matchedPairs = new Set();
        let userAnswers = {};
        let currentFlashcardIndex = 0;
        let currentQuizIndex = 0;
        let quizAnswers = [];
        let gameStats = {
            totalAttempts: 0,
            correctAnswers: 0,
            streak: 0,
            bestScore: 0
        };
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadGameStats();
            initializeMatching();
            updateStatsDisplay();
            shuffleArray(vocabularyData);
        });
        
        // Mode switching
        function switchMode(mode) {
            currentMode = mode;
            
            // Update tab appearance
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide sections
            document.querySelectorAll('.game-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(mode + '-mode').classList.add('active');
            
            // Initialize the selected mode
            switch(mode) {
                case 'matching':
                    initializeMatching();
                    break;
                case 'flashcards':
                    initializeFlashcards();
                    break;
                case 'quiz':
                    initializeQuiz();
                    break;
                case 'study':
                    initializeStudyGuide();
                    break;
            }
        }
        
        // Matching mode functions
        function initializeMatching() {
            const termsList = document.getElementById('termsList');
            const definitionsList = document.getElementById('definitionsList');
            
            // Shuffle the arrays independently
            const shuffledTerms = [...vocabularyData];
            const shuffledDefinitions = [...vocabularyData];
            shuffleArray(shuffledTerms);
            shuffleArray(shuffledDefinitions);
            
            // Generate terms with sequential numbering
            termsList.innerHTML = '';
            shuffledTerms.forEach((term, index) => {
                const termElement = createTermElement(term, index + 1);
                termsList.appendChild(termElement);
            });
            
            // Generate definitions
            definitionsList.innerHTML = '';
            shuffledDefinitions.forEach((term, index) => {
                const definitionElement = createDefinitionElement(term, String.fromCharCode(65 + index));
                definitionsList.appendChild(definitionElement);
            });
            
            // Reset matching state
            matchedPairs.clear();
            userAnswers = {};
            updateMatchingProgress();
        }
        
        function createTermElement(term, displayNumber) {
            const div = document.createElement('div');
            div.className = 'term-item';
            div.dataset.termId = term.id;
            div.dataset.type = 'term';
            
            div.innerHTML = `
                <div class="term-content">
                    <div class="term-number">${displayNumber}</div>
                    <div class="term-text">
                        <div class="term-english">${term.english}</div>
                    </div>
                </div>
                <div class="match-indicator" data-term-id="${term.id}"></div>
                <button class="audio-btn" onclick="playAudio('${term.english}', event)">🔊</button>
            `;
            
            // Add click event listener for matching
            div.addEventListener('click', handleItemClick);
            
            return div;
        }
        
        function createDefinitionElement(term, letter) {
            const div = document.createElement('div');
            div.className = 'definition-item';
            div.dataset.termId = term.id;
            div.dataset.letter = letter;
            div.dataset.type = 'definition';
            
            div.innerHTML = `
                <div class="definition-letter">${letter}</div>
                <div class="definition-text">${term.definition}</div>
            `;
            
            // Add click event listener for matching
            div.addEventListener('click', handleItemClick);
            
            return div;
        }
        
        // Click-based matching handlers
        let selectedItem = null;
        let selectedType = null;
        
        function handleItemClick(e) {
            // Handle clicks on match indicator to unmatch
            if (e.target.classList.contains('match-indicator')) {
                const termId = e.target.dataset.termId;
                const termItem = e.target.closest('.term-item');
                if (termItem.classList.contains('matched')) {
                    unmatchItem(termItem, termId);
                }
                return;
            }
            
            // Don't process clicks on audio buttons
            if (e.target.classList.contains('audio-btn') || e.target.closest('.audio-btn')) {
                return;
            }
            
            e.preventDefault();
            const clickedItem = e.currentTarget;
            const clickedId = clickedItem.dataset.termId;
            const clickedType = clickedItem.dataset.type;
            
            // If clicking on an already matched item, unmatch it
            if (clickedItem.classList.contains('matched')) {
                unmatchItem(clickedItem, clickedId);
                return;
            }
            
            // If no item is selected, select this one
            if (!selectedItem) {
                selectItem(clickedItem, clickedId, clickedType);
                return;
            }
            
            // If clicking the same item, deselect it
            if (selectedItem === clickedItem) {
                deselectItem();
                return;
            }
            
            // If clicking an item of the same type, switch selection
            if (selectedType === clickedType) {
                deselectItem();
                selectItem(clickedItem, clickedId, clickedType);
                return;
            }
            
            // If clicking an item of different type, create a match
            const selectedId = selectedItem.dataset.termId;
            const definitionItem = clickedType === 'definition' ? clickedItem : selectedItem;
            const termItem = clickedType === 'term' ? clickedItem : selectedItem;
            
            createMatch(termItem, definitionItem, selectedId);
            deselectItem();
        }
        
        function selectItem(item, id, type) {
            selectedItem = item;
            selectedType = type;
            item.classList.add('selected');
        }
        
        function deselectItem() {
            if (selectedItem) {
                selectedItem.classList.remove('selected');
            }
            selectedItem = null;
            selectedType = null;
        }
        
        function createMatch(termItem, definitionItem, termId) {
            // Mark both items as matched
            termItem.classList.add('matched');
            definitionItem.classList.add('matched');
            
            // Store the match
            const letter = definitionItem.dataset.letter;
            userAnswers[termId] = letter;
            matchedPairs.add(termId);
            
            // Update the match indicator
            const matchIndicator = termItem.querySelector('.match-indicator');
            if (matchIndicator) {
                matchIndicator.textContent = letter;
                matchIndicator.classList.add('filled');
            }
            
            updateMatchingProgress();
        }
        
        function unmatchItem(item, termId) {
            // Find the paired item
            const isTermItem = item.classList.contains('term-item');
            const pairedSelector = isTermItem ? 
                `.definition-item[data-term-id="${termId}"]` : 
                `.term-item[data-term-id="${termId}"]`;
            const pairedItem = document.querySelector(pairedSelector);
            
            // Remove matched state from both items
            item.classList.remove('matched');
            if (pairedItem) {
                pairedItem.classList.remove('matched');
            }
            
            // Clear the match indicator
            const matchIndicator = item.querySelector('.match-indicator') || 
                                  (pairedItem && pairedItem.querySelector('.match-indicator'));
            if (matchIndicator) {
                matchIndicator.textContent = '';
                matchIndicator.classList.remove('filled');
            }
            
            // Remove from tracking
            delete userAnswers[termId];
            matchedPairs.delete(termId);
            
            updateMatchingProgress();
        }
        
        function updateMatchingProgress() {
            const progress = (matchedPairs.size / vocabularyData.length) * 100;
            document.getElementById('matchingProgress').style.width = progress + '%';
            document.getElementById('matchedCount').textContent = matchedPairs.size;
            document.getElementById('totalMatchCount').textContent = vocabularyData.length;
        }
        
        function checkAnswers() {
            let correctCount = 0;
            
            // Check each answer
            Object.keys(userAnswers).forEach(termId => {
                const term = vocabularyData.find(t => t.id == termId);
                const correctLetter = getCorrectLetter(term);
                
                if (userAnswers[termId] === correctLetter) {
                    correctCount++;
                }
            });
            
            // Update stats
            gameStats.totalAttempts++;
            gameStats.correctAnswers += correctCount;
            
            if (correctCount === vocabularyData.length) {
                gameStats.streak++;
                if (correctCount > gameStats.bestScore) {
                    gameStats.bestScore = correctCount;
                }
            } else {
                gameStats.streak = 0;
            }
            
            saveGameStats();
            updateStatsDisplay();
            showResults(correctCount);
        }
        
        function getCorrectLetter(term) {
            // Letter mapping for 15 terms (A-O)
            const letterMap = {
                1: 'A', 2: 'B', 3: 'C', 4: 'D', 5: 'E',
                6: 'F', 7: 'G', 8: 'H', 9: 'I', 10: 'J',
                11: 'K', 12: 'L', 13: 'M', 14: 'N', 15: 'O'
            };
            return letterMap[term.id];
        }
        
        function showResults(score) {
            const resultsPanel = document.getElementById('resultsPanel');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const performanceFill = document.getElementById('performanceFill');
            const feedbackText = document.getElementById('feedbackText');
            
            scoreDisplay.textContent = `${score}/${vocabularyData.length}`;
            
            const percentage = (score / vocabularyData.length) * 100;
            performanceFill.style.width = percentage + '%';
            
            // Generate feedback
            if (percentage === 100) {
                feedbackText.textContent = "Perfect! You have mastered all the terms! 🎉";
            } else if (percentage >= 80) {
                feedbackText.textContent = "Excellent work! You're doing great! ⭐";
            } else if (percentage >= 60) {
                feedbackText.textContent = "Good job! Keep practicing to improve! 💪";
            } else {
                feedbackText.textContent = "Don't give up! Practice makes perfect! 📚";
            }
            
            resultsPanel.classList.add('show');
        }
        
        function resetMatching() {
            // Clear all matches and selections
            document.querySelectorAll('.term-item').forEach(item => {
                item.classList.remove('matched', 'selected');
                // Clear match indicators
                const indicator = item.querySelector('.match-indicator');
                if (indicator) {
                    indicator.textContent = '';
                    indicator.classList.remove('filled');
                }
            });
            
            document.querySelectorAll('.definition-item').forEach(item => {
                item.classList.remove('matched', 'selected');
            });
            
            matchedPairs.clear();
            userAnswers = {};
            
            // Clear any selected state
            deselectItem();
            
            document.getElementById('resultsPanel').classList.remove('show');
            updateMatchingProgress();
            
            // Reshuffle
            initializeMatching();
        }
        
        // Flashcard mode functions
        function initializeFlashcards() {
            currentFlashcardIndex = 0;
            updateFlashcard();
            updateFlashcardProgress();
        }
        
        function updateFlashcard() {
            const term = vocabularyData[currentFlashcardIndex];
            document.getElementById('flashcardTerm').textContent = term.english;
            
            // Update back side with both Polish and English definition
            const backContent = `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #ffd700; font-size: 1.1em;">${term.polish}</strong>
                </div>
                <div style="line-height: 1.4;">
                    ${term.definition}
                </div>
            `;
            document.getElementById('flashcardDefinition').innerHTML = backContent;
            
            document.getElementById('flashcard').classList.remove('flipped');
        }
        
        function updateFlashcardProgress() {
            const progress = ((currentFlashcardIndex + 1) / vocabularyData.length) * 100;
            document.getElementById('flashcardProgress').style.width = progress + '%';
            document.getElementById('currentCard').textContent = currentFlashcardIndex + 1;
            document.getElementById('totalCards').textContent = vocabularyData.length;
        }
        
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }
        
        function nextCard() {
            if (currentFlashcardIndex < vocabularyData.length - 1) {
                currentFlashcardIndex++;
                updateFlashcard();
                updateFlashcardProgress();
            }
        }
        
        function previousCard() {
            if (currentFlashcardIndex > 0) {
                currentFlashcardIndex--;
                updateFlashcard();
                updateFlashcardProgress();
            }
        }
        
        // Quiz mode functions
        function initializeQuiz() {
            currentQuizIndex = 0;
            quizAnswers = [];
            shuffleArray(vocabularyData);
            updateQuizQuestion();
            updateQuizProgress();
        }
        
        function updateQuizQuestion() {
            const term = vocabularyData[currentQuizIndex];
            const questionTerm = document.getElementById('questionTerm');
            const optionsList = document.getElementById('optionsList');
            
            questionTerm.textContent = term.english;
            
            // Create options (correct answer + 3 random incorrect answers)
            const options = [term.definition];
            const otherTerms = vocabularyData.filter(t => t.id !== term.id);
            shuffleArray(otherTerms);
            
            for (let i = 0; i < 3 && i < otherTerms.length; i++) {
                options.push(otherTerms[i].definition);
            }
            
            shuffleArray(options);
            
            optionsList.innerHTML = '';
            options.forEach((option, index) => {
                const li = document.createElement('li');
                li.className = 'option-item';
                li.textContent = option;
                li.onclick = () => selectOption(li, option);
                optionsList.appendChild(li);
            });
        }
        
        function selectOption(element, option) {
            document.querySelectorAll('.option-item').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');
            
            // Store answer
            quizAnswers[currentQuizIndex] = option;
        }
        
        function submitQuizAnswer() {
            const term = vocabularyData[currentQuizIndex];
            const selectedOption = document.querySelector('.option-item.selected');
            
            if (!selectedOption) {
                alert('Please select an answer first!');
                return;
            }
            
            const isCorrect = selectedOption.textContent === term.definition;
            
            // Show correct/incorrect feedback
            document.querySelectorAll('.option-item').forEach(item => {
                if (item.textContent === term.definition) {
                    item.classList.add('correct');
                } else if (item.classList.contains('selected')) {
                    item.classList.add('incorrect');
                }
            });
            
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }
        
        function nextQuestion() {
            if (currentQuizIndex < vocabularyData.length - 1) {
                currentQuizIndex++;
                updateQuizQuestion();
                updateQuizProgress();
            } else {
                // Quiz completed
                alert('Quiz completed! Check your results in the matching mode.');
                switchMode('matching');
            }
        }
        
        function updateQuizProgress() {
            const progress = ((currentQuizIndex + 1) / vocabularyData.length) * 100;
            document.getElementById('quizProgress').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuizIndex + 1;
            document.getElementById('totalQuestions').textContent = vocabularyData.length;
        }
        
        // Study Guide mode
        function initializeStudyGuide() {
            const studyContent = document.getElementById('studyContent');
            
            let html = '<div style="display: grid; gap: 20px;">';
            
            vocabularyData.forEach(term => {
                html += `
                    <div style="background: var(--light-gray); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--polish-red);">
                        <h3 style="color: var(--polish-red); margin-bottom: 10px;">
                            ${term.english} / ${term.polish}
                            <button class="audio-btn" onclick="playAudio('${term.english}', event)" style="margin-left: 10px;">🔊</button>
                        </h3>
                        <p style="margin-bottom: 10px; line-height: 1.6;">${term.definition}</p>
                        <small style="color: var(--medium-gray);">Pronunciation: ${term.pronunciation}</small>
                    </div>
                `;
            });
            
            html += '</div>';
            studyContent.innerHTML = html;
        }
        
        // Audio functionality
        function playAudio(text, event) {
            if (event) {
                event.stopPropagation();
            }
            
            // Use Web Speech API for text-to-speech
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.8;
                utterance.pitch = 1;
                utterance.volume = 0.8;
                speechSynthesis.speak(utterance);
            }
        }
        
        // Utility functions
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function updateStatsDisplay() {
            document.getElementById('totalTerms').textContent = vocabularyData.length;
            document.getElementById('masteredTerms').textContent = gameStats.bestScore;
            
            const accuracy = gameStats.totalAttempts > 0 ? 
                Math.round((gameStats.correctAnswers / (gameStats.totalAttempts * vocabularyData.length)) * 100) : 0;
            document.getElementById('accuracyRate').textContent = accuracy + '%';
            document.getElementById('streakCount').textContent = gameStats.streak;
        }
        
        function saveGameStats() {
            localStorage.setItem('polishElectionVocabStats', JSON.stringify(gameStats));
        }
        
        function loadGameStats() {
            const saved = localStorage.getItem('polishElectionVocabStats');
            if (saved) {
                gameStats = JSON.parse(saved);
            }
        }
        
        function showHint() {
            if (matchedPairs.size === vocabularyData.length) {
                alert('All terms have been matched!');
                return;
            }
            
            // Find an unmatched term and show its definition
            const unmatchedTerm = vocabularyData.find(term => !matchedPairs.has(term.id.toString()));
            if (unmatchedTerm) {
                // Find the corresponding definition element
                const definitionElement = document.querySelector(`[data-term-id="${unmatchedTerm.id}"][data-type="definition"]`);
                if (definitionElement) {
                    const letter = definitionElement.dataset.letter;
                    alert(`Hint: Term "${unmatchedTerm.english}" matches with definition ${letter}: "${unmatchedTerm.definition.substring(0, 50)}..."`);
                }
            }
        }
        
        // Keyboard accessibility
        document.addEventListener('keydown', function(e) {
            if (currentMode === 'flashcards') {
                if (e.key === 'ArrowLeft') {
                    previousCard();
                } else if (e.key === 'ArrowRight') {
                    nextCard();
                } else if (e.key === ' ') {
                    e.preventDefault();
                    flipCard();
                }
            }
        });
    </script>
</body>
</html>
