<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lekcja Angielskiego - Ubrania - Klasa 1</title>
    <style>
        body { margin: 0; padding: 0; font-family: 'Comic Sans MS', cursive, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .container { background: white; border-radius: 30px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 1000px; width: 95%; text-align: center; position: relative; }
        .mode-buttons { margin-bottom: 30px; }
        .mode-btn { background: #4CAF50; color: white; border: none; padding: 15px 30px; font-size: 20px; border-radius: 50px; cursor: pointer; margin: 0 10px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .mode-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
        .mode-btn.active { background: #ff6b6b; }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .clothing-display { background: #f8f9fa; border-radius: 20px; padding: 30px; margin: 20px 0; position: relative; min-height: 450px; display: flex; flex-direction: column; justify-content: center; }
        .clothing-item { font-size: 100px; margin-bottom: 15px; animation: bounce 1s ease-in-out; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .english-word { font-size: 48px; color: #2c3e50; font-weight: bold; margin-bottom: 10px; }
        .pronunciation { font-size: 32px; color: #e74c3c; margin-bottom: 10px; background: #ffe0e0; padding: 8px 18px; border-radius: 50px; display: inline-block; }
        .polish-word { font-size: 36px; color: #3498db; margin-bottom: 15px; }
        .activity-prompt { font-size: 28px; color: #16a085; font-weight: bold; background: #e0f7fa; padding: 15px; border-radius: 15px; margin-top: 15px; }
        .control-buttons { margin-top: 20px; }
        .control-btn { background: #3498db; color: white; border: none; padding: 15px 30px; font-size: 22px; border-radius: 50px; cursor: pointer; margin: 0 10px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .control-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
        .play-sound { background: #e74c3c; }
        .progress { background: #ecf0f1; height: 20px; border-radius: 50px; overflow: hidden; margin: 20px 0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
        .progress-bar { background: linear-gradient(90deg, #f39c12, #e74c3c); height: 100%; width: 0%; transition: width 0.5s; border-radius: 50px; }
        .games-menu, .game-container { text-align: center; }
        .game-btn { display: block; width: 80%; margin: 15px auto; padding: 25px; font-size: 28px; background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); border: none; border-radius: 20px; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 20px rgba(0,0,0,0.15); }
        .game-btn:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.2); }
        .back-btn { position: absolute; top: 20px; left: 20px; background: #7f8c8d; padding: 10px 20px; font-size: 16px; }
        /* Team Practice Game */
        .team-scores { display: flex; justify-content: space-around; margin-bottom: 20px; font-size: 24px; font-weight: bold; }
        .team-score { padding: 15px 30px; border-radius: 20px; transition: all 0.3s; }
        .team-score.active { background: #ffc107; color: white; transform: scale(1.1); box-shadow: 0 0 15px #ffc107; }
        .question { font-size: 36px; color: #2c3e50; margin-bottom: 20px; }
        .practice-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
        .practice-card { background: #f8f9fa; border-radius: 15px; padding: 15px; cursor: pointer; transition: all 0.3s; border: 3px solid transparent; }
        .practice-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .practice-card.correct { border-color: #4CAF50; background: #e8f5e9; animation: correctPulse 0.6s; }
        .practice-card.wrong { border-color: #e74c3c; background: #ffebee; animation: shake 0.5s; }
        .practice-emoji { font-size: 50px; margin-bottom: 8px; }
        .practice-text { font-size: 16px; font-weight: bold; }
        @keyframes correctPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        /* Simon Says & What's Missing */
        .game-display { min-height: 400px; background: #e3f2fd; border-radius: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; }
        .game-instruction { font-size: 48px; color: #2c3e50; margin-bottom: 30px; }
        .whats-missing-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .whats-missing-card { background: white; border-radius: 15px; padding: 15px; }
        .whats-missing-emoji { font-size: 60px; }
        .answer-reveal { font-size: 32px; margin-top: 20px; color: #e74c3c; font-weight: bold; }
        /* Intro & Celebration */
        .intro-section { text-align: center; padding: 40px; }
        .intro-section h1 { font-size: 48px; color: #2c3e50; margin-bottom: 20px; }
        .intro-section p { font-size: 24px; color: #7f8c8d; margin-bottom: 30px; }
        .start-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 20px 50px; font-size: 28px; border-radius: 50px; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .start-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
        .celebration { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 100px; animation: celebrate 1s ease-out; z-index: 1000; display: none; }
        @keyframes celebrate { 0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(2) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="intro-section section active" id="intro">
            <h1>üåü Lekcja Angielskiego: Ubrania üåü</h1>
            <p>Interaktywna przygoda dla klasy 1</p>
            <button class="start-btn" onclick="startLesson()">Zaczynajmy!</button>
        </div>

        <div id="main-content" style="display: none;">
            <div class="mode-buttons">
                <button id="learn-btn" class="mode-btn active" onclick="switchMode('learning')">üìö Nauka</button>
                <button id="games-btn" class="mode-btn" onclick="switchMode('games')">üéÆ Gry</button>
            </div>

            <!-- ### SEKCJA NAUKI ### -->
            <div class="section active" id="learning-section">
                <div class="progress"><div class="progress-bar" id="progress"></div></div>
                <div class="clothing-display">
                    <div class="clothing-item" id="emoji">üëï</div>
                    <div class="english-word" id="english">T-shirt</div>
                    <div class="pronunciation" id="pronunciation">[ti-szert]</div>
                    <div class="polish-word" id="polish">Koszulka</div>
                    <div class="activity-prompt" id="activity">ü§∏‚Äç‚ôÄÔ∏è Poka≈º na sobie!</div>
                </div>
                <div class="control-buttons">
                    <button class="control-btn" onclick="previousItem()">‚¨ÖÔ∏è Poprzednie</button>
                    <button class="control-btn play-sound" onclick="playSound()">üîä Wymowa</button>
                    <button class="control-btn" onclick="nextItem()">Nastƒôpne ‚û°Ô∏è</button>
                </div>
            </div>

            <!-- ### SEKCJA GIER (MENU) ### -->
            <div class="section" id="games-section">
                <div id="games-menu" class="games-menu active">
                    <h2 class="question">Wybierzcie grƒô!</h2>
                    <button class="game-btn" onclick="showGame('team-practice')">üèÜ Dru≈ºyna vs Dru≈ºyna üèÜ</button>
                    <button class="game-btn" onclick="showGame('simon-says')">üó£Ô∏è Simon M√≥wi üó£Ô∏è</button>
                    <button class="game-btn" onclick="showGame('whats-missing')">‚ùì Czego Brakuje? ‚ùì</button>
                </div>

                <!-- Gra 1: Dru≈ºyna vs Dru≈ºyna -->
                <div id="team-practice-game" class="game-container" style="display: none;">
                    <button class="control-btn back-btn" onclick="showGameMenu()">Wr√≥ƒá</button>
                    <div class="team-scores">
                        <div id="team1" class="team-score active">Dru≈ºyna 1: <span id="team1Score">0</span></div>
                        <div id="team2" class="team-score">Dru≈ºyna 2: <span id="team2Score">0</span></div>
                    </div>
                    <div class="question" id="questionText"></div>
                    <div class="practice-grid" id="practiceGrid"></div>
                </div>

                <!-- Gra 2: Simon M√≥wi -->
                <div id="simon-says-game" class="game-container" style="display: none;">
                    <button class="control-btn back-btn" onclick="showGameMenu()">Wr√≥ƒá</button>
                    <div class="game-display">
                        <div class="game-instruction" id="simonSaysText">Gotowi?</div>
                    </div>
                    <div class="control-buttons">
                        <button class="control-btn" onclick="generateSimonCommand()">‚ñ∂Ô∏è Nastƒôpna komenda</button>
                    </div>
                </div>

                <!-- Gra 3: Czego Brakuje? -->
                <div id="whats-missing-game" class="game-container" style="display: none;">
                    <button class="control-btn back-btn" onclick="showGameMenu()">Wr√≥ƒá</button>
                    <div class="game-display" id="whatsMissingDisplay">
                        <div class="game-instruction">Zapamiƒôtajcie te ubrania!</div>
                    </div>
                    <div class="control-buttons">
                        <button class="control-btn" id="whatsMissingStartBtn" onclick="startWhatsMissing()">‚ñ∂Ô∏è Start</button>
                        <button class="control-btn" id="whatsMissingRevealBtn" style="display:none;" onclick="revealMissingItem()">Poka≈º odpowied≈∫</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="celebration" id="celebration">üéâ</div>
    </div>

    <script>
        const clothingItems = [
            { emoji: 'üëï', english: 'T-shirt', pronunciation: '[ti-szert]', polish: 'Koszulka', activity: 'ü§∏ Poka≈º na sobie T-shirt!' },
            { emoji: 'üß•', english: 'Jacket', pronunciation: '[d≈ºaket]', polish: 'Kurtka', activity: 'üß• Udawaj, ≈ºe zapinasz kurtkƒô!' },
            { emoji: 'üëñ', english: 'Trousers', pronunciation: '[trauzers]', polish: 'Spodnie', activity: 'üëñ Wsta≈Ñ i dotknij swoich spodni!' },
            { emoji: 'üëü', english: 'Shoes', pronunciation: '[szuz]', polish: 'Buty', activity: 'üëü Tupnij butami o pod≈Çogƒô!' },
            { emoji: 'üß¢', english: 'Cap', pronunciation: '[kap]', polish: 'Czapka z daszkiem', activity: 'üß¢ Udawaj, ≈ºe zak≈Çadasz czapkƒô!' },
            { emoji: 'üëö', english: 'Blouse', pronunciation: '[blauz]', polish: 'Bluzka', activity: 'üëö Poka≈º co≈õ w kolorze bluzki!' },
            { emoji: 'üß¶', english: 'Socks', pronunciation: '[soks]', polish: 'Skarpetki', activity: 'üß¶ Poruszaj palcami w skarpetkach!' },
            { emoji: 'üëó', english: 'Dress', pronunciation: '[dres]', polish: 'Sukienka', activity: 'üëó Obr√≥ƒá siƒô jak w sukience!' }
        ];

        let currentIndex = 0;
        let currentMode = 'learning';
        
        // Zmienne do gier
        let team1Score = 0, team2Score = 0, currentTeam = 1;
        let currentQuestionItem = null;
        let missingItem = null;

        function startLesson() {
            document.getElementById('intro').classList.remove('active');
            document.getElementById('intro').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            updateLearningDisplay();
        }

        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            
            if (mode === 'learning') {
                document.getElementById('learn-btn').classList.add('active');
                document.getElementById('learning-section').classList.add('active');
            } else {
                document.getElementById('games-btn').classList.add('active');
                document.getElementById('games-section').classList.add('active');
                showGameMenu();
            }
        }

        // --- LOGIKA SEKCJI NAUKI ---
        function updateLearningDisplay() {
            const item = clothingItems[currentIndex];
            document.getElementById('emoji').textContent = item.emoji;
            document.getElementById('english').textContent = item.english;
            document.getElementById('pronunciation').textContent = item.pronunciation;
            document.getElementById('polish').textContent = item.polish;
            document.getElementById('activity').textContent = item.activity;
            document.getElementById('progress').style.width = ((currentIndex + 1) / clothingItems.length) * 100 + '%';
            document.getElementById('emoji').style.animation = 'none';
            setTimeout(() => { document.getElementById('emoji').style.animation = 'bounce 1s ease-in-out'; }, 10);
        }

        function nextItem() { currentIndex = (currentIndex + 1) % clothingItems.length; updateLearningDisplay(); }
        function previousItem() { currentIndex = (currentIndex - 1 + clothingItems.length) % clothingItems.length; updateLearningDisplay(); }
        function playSound() {
            const item = clothingItems[currentIndex];
            const utterance = new SpeechSynthesisUtterance(item.english);
            utterance.lang = 'en-US';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }

        // --- LOGIKA SEKCJI GIER ---
        function showGameMenu() {
            document.querySelectorAll('.game-container').forEach(g => g.style.display = 'none');
            document.getElementById('games-menu').style.display = 'block';
        }

        function showGame(gameId) {
            document.getElementById('games-menu').style.display = 'none';
            document.getElementById(gameId + '-game').style.display = 'block';
            if (gameId === 'team-practice') setupTeamPractice();
            if (gameId === 'simon-says') generateSimonCommand();
            if (gameId === 'whats-missing') resetWhatsMissing();
        }

        // Gra 1: Dru≈ºyna vs Dru≈ºyna
        function setupTeamPractice() {
            team1Score = 0; team2Score = 0; currentTeam = 1;
            updateTeamScores();
            generateTeamQuestion();
        }

        function updateTeamScores() {
            document.getElementById('team1Score').textContent = team1Score;
            document.getElementById('team2Score').textContent = team2Score;
            document.getElementById('team1').classList.toggle('active', currentTeam === 1);
            document.getElementById('team2').classList.toggle('active', currentTeam === 2);
        }

        function generateTeamQuestion() {
            const grid = document.getElementById('practiceGrid');
            grid.innerHTML = '';
            currentQuestionItem = clothingItems[Math.floor(Math.random() * clothingItems.length)];
            document.getElementById('questionText').textContent = `Kliknij na: ${currentQuestionItem.english}`;
            
            let options = [currentQuestionItem];
            let availableItems = clothingItems.filter(item => item !== currentQuestionItem);
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * availableItems.length);
                options.push(availableItems.splice(randomIndex, 1)[0]);
            }
            options.sort(() => Math.random() - 0.5);
            
            options.forEach(item => {
                const card = document.createElement('div');
                card.className = 'practice-card';
                card.innerHTML = `<div class="practice-emoji">${item.emoji}</div><div class="practice-text">${item.english}</div>`;
                card.onclick = () => checkTeamAnswer(item, card);
                grid.appendChild(card);
            });
        }

        function checkTeamAnswer(item, card) {
            if (card.classList.contains('correct') || card.classList.contains('wrong')) return;
            
            if (item === currentQuestionItem) {
                card.classList.add('correct');
                if (currentTeam === 1) team1Score += 10; else team2Score += 10;
                showCelebration();
                playSoundFor(item.english, true);
                setTimeout(() => {
                    currentTeam = currentTeam === 1 ? 2 : 1;
                    updateTeamScores();
                    generateTeamQuestion();
                }, 2000);
            } else {
                card.classList.add('wrong');
                playSoundFor('Try again', false);
            }
        }

        // Gra 2: Simon M√≥wi
        function generateSimonCommand() {
            const actions = ['Touch your', 'Point to', 'Show me'];
            const randomAction = actions[Math.floor(Math.random() * actions.length)];
            const randomItem = clothingItems[Math.floor(Math.random() * clothingItems.length)];
            const withSimon = Math.random() > 0.4; // Wiƒôksza szansa na "Simon says"
            
            const command = `${withSimon ? 'Simon says: ' : ''}${randomAction} ${randomItem.english}!`;
            document.getElementById('simonSaysText').textContent = command;
        }

        // Gra 3: Czego Brakuje?
        function resetWhatsMissing() {
            const display = document.getElementById('whatsMissingDisplay');
            display.innerHTML = `<div class="game-instruction">Zapamiƒôtajcie te ubrania!</div>`;
            document.getElementById('whatsMissingStartBtn').style.display = 'inline-block';
            document.getElementById('whatsMissingRevealBtn').style.display = 'none';
        }
        
        function startWhatsMissing() {
            document.getElementById('whatsMissingStartBtn').style.display = 'none';
            const display = document.getElementById('whatsMissingDisplay');
            display.innerHTML = ''; // Clear previous
            
            let options = [...clothingItems].sort(() => 0.5 - Math.random()).slice(0, 6);
            missingItem = options[Math.floor(Math.random() * options.length)];
            
            const grid = document.createElement('div');
            grid.className = 'whats-missing-grid';
            options.forEach(item => {
                grid.innerHTML += `<div class="whats-missing-card"><div class="whats-missing-emoji">${item.emoji}</div></div>`;
            });
            display.appendChild(grid);
            
            setTimeout(() => {
                display.innerHTML = `<div class="game-instruction">Czego brakuje?</div>`;
                const newGrid = document.createElement('div');
                newGrid.className = 'whats-missing-grid';
                options.filter(i => i !== missingItem).forEach(item => {
                    newGrid.innerHTML += `<div class="whats-missing-card"><div class="whats-missing-emoji">${item.emoji}</div></div>`;
                });
                display.appendChild(newGrid);
                document.getElementById('whatsMissingRevealBtn').style.display = 'inline-block';
            }, 8000); // Czas na zapamiƒôtanie (8 sekund)
        }
        
        function revealMissingItem() {
            const display = document.getElementById('whatsMissingDisplay');
            display.innerHTML += `<div class="answer-reveal">Brakowa≈Ço: ${missingItem.emoji} ${missingItem.english}!</div>`;
            document.getElementById('whatsMissingRevealBtn').style.display = 'none';
            setTimeout(resetWhatsMissing, 4000);
        }

        // --- Funkcje pomocnicze ---
        function showCelebration() {
            const celebration = document.getElementById('celebration');
            const emojis = ['üéâ', '‚≠ê', 'üåü', '‚ú®', 'üéä', 'üëè', 'ü•≥'];
            celebration.textContent = emojis[Math.floor(Math.random() * emojis.length)];
            celebration.style.display = 'block';
            setTimeout(() => { celebration.style.display = 'none'; }, 1000);
        }

        function playSoundFor(text, isCorrect) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            utterance.pitch = isCorrect ? 1.3 : 0.8;
            speechSynthesis.speak(utterance);
        }

    </script>
</body>
</html>
